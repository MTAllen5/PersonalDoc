(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2acdb294"],{"264d":function(t,a,e){"use strict";var s=e("8ea7"),i=e.n(s);i.a},"45fc":function(t,a,e){"use strict";var s=e("23e7"),i=e("b727").some,n=e("a640"),r=e("ae40"),l=n("some"),o=r("some");s({target:"Array",proto:!0,forced:!l||!o},{some:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"4d9b":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"department-console"},[e("today-data",{attrs:{gutter:t.gutter,data:t.todayData}}),e("el-row",{attrs:{gutter:t.gutter}},[e("el-col",{attrs:{span:18}},[e("el-new-card",[e("template",{slot:"header"},[e("div",[t._v(" 积分账户当前额度概览 "),e("span",{staticClass:"acct-sts",style:t._f("fmtAcctApplStatusColor")(2)},[e("i",{style:t._f("fmtAcctApplStatusColor")(2,"backgroundColor")}),t._v(" 提额申请中 ")])])]),e("amount-acct",{attrs:{data:t.amountData}})],2)],1),e("el-col",{attrs:{span:6}},[e("to-do-list",{attrs:{list:t.toDo}})],1)],1),e("el-new-card",[e("el-form",{staticClass:"condition-bar",attrs:{inline:"",model:t.searchForm,size:"small"}},[e("el-form-item",[e("el-select",{attrs:{placeholder:"活动状态"},model:{value:t.searchForm.status,callback:function(a){t.$set(t.searchForm,"status",a)},expression:"searchForm.status"}},[e("el-option",{attrs:{label:"全部",value:""}}),e("el-option",{attrs:{label:"已开始",value:1}}),e("el-option",{attrs:{label:"已暂停",value:2}}),e("el-option",{attrs:{label:"已重启",value:3}}),e("el-option",{attrs:{label:"已结束",value:4}})],1)],1),e("el-form-item",[e("el-select",{attrs:{placeholder:"活动模式"},model:{value:t.searchForm.mode,callback:function(a){t.$set(t.searchForm,"mode",a)},expression:"searchForm.mode"}},[e("el-option",{attrs:{label:"全部",value:""}}),e("el-option",{attrs:{label:"线上",value:1}}),e("el-option",{attrs:{label:"线下",value:2}})],1)],1),e("el-form-item",[e("el-select",{attrs:{placeholder:"业务归属"},model:{value:t.searchForm.bussiness,callback:function(a){t.$set(t.searchForm,"bussiness",a)},expression:"searchForm.bussiness"}},[e("el-option",{attrs:{label:"全部",value:""}}),e("el-option",{attrs:{label:"客户业务",value:1}}),e("el-option",{attrs:{label:"DLR业务",value:2}})],1)],1),e("el-form-item",[e("el-select",{attrs:{placeholder:"活动类型"},model:{value:t.searchForm.type,callback:function(a){t.$set(t.searchForm,"type",a)},expression:"searchForm.type"}},[e("el-option",{attrs:{label:"全部",value:""}}),e("el-option",{attrs:{label:"常规",value:2}}),e("el-option",{attrs:{label:"节点",value:3}})],1)],1),e("el-form-item",[e("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"活动名称",multiple:"","collapse-tags":""},on:{change:t.searchNameChange},model:{value:t.searchForm.name,callback:function(a){t.$set(t.searchForm,"name",a)},expression:"searchForm.name"}},[e("el-option",{attrs:{label:"全部",value:""}}),t._l(t.actList,(function(t){return e("el-option",{key:"actList-"+t.id,attrs:{label:t.name,value:t.id}})}))],2)],1),e("el-form-item",[e("el-select",{attrs:{placeholder:"认证状态"},model:{value:t.searchForm.verifiSts,callback:function(a){t.$set(t.searchForm,"verifiSts",a)},expression:"searchForm.verifiSts"}},[e("el-option",{attrs:{label:"全部",value:""}}),e("el-option",{attrs:{label:"已注册",value:1}}),e("el-option",{attrs:{label:"未注册",value:2}})],1)],1),e("el-form-item",[e("date-range",{model:{value:t.dateRange,callback:function(a){t.dateRange=a},expression:"dateRange"}})],1),e("el-form-item",[e("el-button",{staticStyle:{"min-width":"75px"},attrs:{plain:"",type:"primary",loading:t.isChartsLoading},on:{click:t.searchData}},[t._v("查询")])],1)],1)],1),t.pointsData.pointsIssued?e("el-tabs",{attrs:{type:"border-card"}},[e("el-tab-pane",{attrs:{label:"积分发行/使用情况统计",lazy:""}},[e("div",{staticClass:"charts-header"},[t._v(t._s(t.fmtCDateRange)),e("el-link",{attrs:{underline:!1,icon:"el-icon-download"}})],1),e("div",{staticClass:"charts-box"},[e("chart-points-issued",{attrs:{datas:t.pointsData.pointsIssued}}),e("el-divider"),e("chart-points-usage",{attrs:{datas:t.pointsData.pointsUsage}}),e("el-divider"),e("chart-points-unused",{attrs:{datas:t.pointsData.pointsUnused}}),e("el-divider"),e("chart-points-verified",{attrs:{datas:t.pointsData.pointsVerified}}),e("el-divider"),e("chart-points-recyled",{attrs:{datas:t.pointsData.pointsRecyled}}),e("el-divider"),e("chart-points-chain",{attrs:{datas:t.pointsData.pointsChain}}),e("el-divider"),e("chart-points-growth-rate",{attrs:{datas:t.pointsData.pointsGrowthRate}}),e("el-divider"),e("chart-points-verified-src",{attrs:{datas:t.pointsData.pointsVerifiedSrc}}),e("el-divider"),e("chart-points-recyled-src",{attrs:{datas:t.pointsData.pointsRecyledSrc}})],1)]),e("el-tab-pane",{attrs:{label:"业务归属统计",lazy:""}},[e("div",{staticClass:"charts-header"},[t._v(t._s(t.fmtCDateRange)),e("el-link",{attrs:{underline:!1,icon:"el-icon-download"}})],1),e("div",{staticClass:"charts-box"},[e("chart-bus-chain",{attrs:{datas:t.bussinessData.busChain}}),e("el-divider"),e("chart-bus-growth-rate",{attrs:{datas:t.bussinessData.busGrowthRate}})],1)]),e("el-tab-pane",{attrs:{label:"活动效果统计",lazy:""}},[e("div",{staticClass:"charts-header"},[t._v(t._s(t.fmtCDateRange)),e("el-link",{attrs:{underline:!1,icon:"el-icon-download"}})],1),e("div",{staticClass:"charts-box"},[e("chart-part-user",{attrs:{datas:t.activityEffectData.partUser}}),e("el-divider"),e("chart-part-user-chain",{attrs:{datas:t.activityEffectData.partUserChain}}),e("el-divider"),e("chart-part-times",{attrs:{datas:t.activityEffectData.partTimes}}),e("el-divider"),e("chart-part-times-chain",{attrs:{datas:t.activityEffectData.partTimesChain}})],1)]),e("el-tab-pane",{attrs:{label:"活动类型/状态统计",lazy:""}},[e("div",{staticClass:"charts-header"},[t._v(t._s(t.fmtCDateRange)),e("el-link",{attrs:{underline:!1,icon:"el-icon-download"}})],1),e("div",{staticClass:"charts-box"},[e("chart-act-mode",{attrs:{datas:t.activityTypeData.actMode}}),e("el-divider"),e("chart-act-bus",{attrs:{datas:t.activityTypeData.actBus}}),e("el-divider"),e("chart-act-type",{attrs:{datas:t.activityTypeData.actType}}),e("el-divider"),e("chart-act-status",{attrs:{datas:t.activityTypeData.actStatus}})],1)]),e("el-tab-pane",{attrs:{label:"结算统计",lazy:""}},[e("div",{staticClass:"charts-header"},[t._v(t._s(t.fmtCDateRange)),e("el-link",{attrs:{underline:!1,icon:"el-icon-download"}})],1),e("div",{staticClass:"charts-box"},[e("chart-stmt-overview",{attrs:{datas:t.settlementData.overview}}),e("el-divider"),e("chart-stmt-sts-rec",{attrs:{datas:t.settlementData.stsRec}}),e("el-divider"),e("chart-stmt-sts-pay",{attrs:{datas:t.settlementData.stsPay}}),e("el-divider"),e("chart-stmt-dept-rec",{attrs:{datas:t.settlementData.deptRec}}),e("el-divider"),e("chart-stmt-dept-pay",{attrs:{datas:t.settlementData.deptPay}}),e("el-divider"),e("chart-stmt-records",{attrs:{search:t.searchForm}})],1)]),e("el-tab-pane",{attrs:{label:"商品统计",lazy:""}},[e("div",{staticClass:"charts-header"},[t._v(t._s(t.fmtCDateRange)),e("el-link",{attrs:{underline:!1,icon:"el-icon-download"}})],1),e("div",{staticClass:"charts-box"},[e("chart-goods",{attrs:{datas:t.goodsData.goods}}),e("el-divider"),e("chart-goods-chain",{attrs:{datas:t.goodsData.goodsChain}}),e("el-divider"),e("chart-goods-verified-source",{attrs:{datas:t.goodsData.verifiedSource}})],1)])],1):t._e()],1)},i=[],n=(e("45fc"),e("b0c0"),e("d3b7"),e("3ca3"),e("ddb0"),e("5530")),r=e("b1f8"),l=e("ba46"),o=e("d233"),c=e("fa2d"),d=e("9db7"),u=e("1ff6"),m=e("c1df"),p=e.n(m),h=e("2f62"),v={name:"department-console",mixins:[u["a"]],components:{ElNewCard:r["a"],TodayData:l["a"],AmountAcct:o["a"],ToDoList:c["a"],DateRange:d["a"]},data:function(){return{gutter:40,amountData:{},toDo:[],todayData:[],actList:[],searchForm:{status:null,mode:null,bussiness:null,type:null,name:[],verifiSts:null,startTime:null,endTime:null},dateRange:[],isLoading:!1,isChartsLoading:!1,fmtCDateRange:""}},watch:{dateRange:function(t){this.searchForm.startTime=t[0],this.searchForm.endTime=t[1]},isChartsLoading:function(t){if(!t){var a=this.dateRange[0]?p()(this.dateRange[0]).format("YYYY年MM月DD日 HH时mm分"):"",e=p()(this.dateRange[1]?this.dateRange[1]:p()()).format("YYYY年MM月DD日 HH时mm分");this.fmtCDateRange=a+" 至 "+e}}},created:function(){var t=this;this.getData(),setTimeout((function(){t.searchData()}),1500)},methods:Object(n["a"])({},Object(h["c"])(["setDeptList"]),{getData:function(){var t=this;this.isLoading=!0,Promise.all([this.$http.serviceGetDeptConsole(),this.$http.serviceGetAcctActList(),this.$http.serviceGetDeptList()]).then((function(a){t.amountData=a[0].amountData,t.todayData=a[0].todayData,t.toDo=a[0].toDoList,t.actList=a[1],t.setDeptList(a[2])})).finally((function(){t.isLoading=!1}))},searchData:function(){var t=this;this.isChartsLoading=!0,this.$http.serviceChartsData(this.searchForm).then((function(a){t.pointsData=a.pointsData,t.bussinessData=a.bussinessData,t.activityEffectData=a.activityEffectData,t.activityTypeData=a.activityTypeData,t.settlementData=a.settlementData,t.goodsData=a.goodsData})).finally((function(){t.isChartsLoading=!1}))},searchNameChange:function(t){t.some((function(t){return""===t}))&&(this.searchForm.name=[""])}})},f=v,b=(e("264d"),e("2877")),g=Object(b["a"])(f,s,i,!1,null,"7026c86b",null);a["default"]=g.exports},6080:function(t,a,e){"use strict";var s=e("8bdd"),i=e.n(s);i.a},"655d":function(t,a,e){"use strict";var s=e("cae6"),i=e.n(s);i.a},"8bdd":function(t,a,e){},"8ea7":function(t,a,e){},cae6:function(t,a,e){},d233:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"amount-container"},[e("div",{staticClass:"amount-inner"},[e("ul",{staticClass:"amount-datas",class:{hasLine:t.hasLine}},[e("li",[e("label",[t._v("当前额度")]),e("span",[t._v(t._s(t._f("fmtMoney")(t.data.totalAmount)))])]),e("li",[e("label",[t._v("已用额度")]),e("span",[t._v(t._s(t._f("fmtMoney")(t.data.usedAmount)))])]),e("li",[e("label",[t._v("可用额度")]),e("span",[t._v(t._s(t._f("fmtMoney")(t.data.availableAmount)))])]),t.hasLine?e("li",[e("label",[t._v("预算额度警戒线")]),e("span",[t._v(t._s(t._f("fmtFloat2Percent")(t.data.budgetAmountLine)))])]):t._e(),e("li",[e("label",[t._v("预算额度")]),e("span",[t._v(t._s(t._f("fmtMoney")(t.data.budgetAmount)))])]),e("li",[e("label",[t._v("备用额度")]),e("span",[t._v(t._s(t._f("fmtMoney")(t.data.imprestAmount)))])]),e("li",[e("label",[t._v("已发行积分")]),e("span",[t._v(t._s(t._f("fmtMoney")(t.data.issued)))])]),t.hasLine?e("li",[e("label",[t._v("备用额度警戒线")]),e("span",[t._v(t._s(t._f("fmtFloat2Percent")(t.data.imprestAmountLine)))])]):t._e()]),e("div",{staticClass:"amount-chart"},[e("div",{staticClass:"amount-budget",style:{width:t.budgetWidth},attrs:{title:t.budgetTips}},[e("label",[t._v("预算额度")]),t.hasLine&&t.data.budgetAmountLine?e("div",{staticClass:"budget-line",style:{left:t.budgetLinePos}}):t._e()]),e("div",{staticClass:"amount-imprest",style:{width:t.imprestWidth},attrs:{title:t.imprestTips}},[e("label",[t._v("备用额度")]),t.hasLine&&t.data.imprestAmountLine?e("div",{staticClass:"imprest-line",style:{left:t.imprestLinePos}}):t._e()]),e("div",{directives:[{name:"show",rawName:"v-show",value:"-"!==t.usedWidth,expression:"usedWidth !== '-'"}],staticClass:"budget-used",style:{width:t.usedWidth}},[e("span",[t._v("已用额度："),e("strong",[t._v(t._s(t.usedWidth))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"-"!==t.issuedWidth,expression:"issuedWidth !== '-'"}],staticClass:"budget-issued",style:{width:t.issuedWidth}},[e("span",[t._v("已发行："),e("strong",[t._v(t._s(t.issuedWidth))])])])])])])])},i=[],n=e("8975"),r={name:"amount-acct",props:{data:{type:Object,required:!0},hasLine:{type:Boolean,default:!0}},computed:{budgetWidth:function(){var t=Object(n["a"])(this.data.budgetAmount/(this.data.budgetAmount+this.data.imprestAmount));return"-"===t?"50%":t},imprestWidth:function(){return 100-parseFloat(this.budgetWidth)+"%"},budgetLinePos:function(){return Object(n["a"])(this.data.budgetAmountLine)},imprestLinePos:function(){return Object(n["a"])(this.data.imprestAmountLine)},usedWidth:function(){return Object(n["a"])(this.data.usedAmount/(this.data.budgetAmount+this.data.imprestAmount))},issuedWidth:function(){return Object(n["a"])(this.data.issued/this.data.usedAmount)},budgetTips:function(){return"预算费用（元）："+Object(n["b"])(this.data.budget)},imprestTips:function(){return"备用金（元）："+Object(n["b"])(this.data.imprest)}}},l=r,o=(e("655d"),e("2877")),c=Object(o["a"])(l,s,i,!1,null,"bff7fb10",null);a["a"]=c.exports},fa2d:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-new-card",[e("template",{slot:"header"},[e("span",[t._v("待办事项")])]),e("div",{staticClass:"to-do-list",style:{height:t.height}},t._l(t.list,(function(a,s){return e("div",{key:"to-do-list-"+s},[e("i",[t._v(t._s(s+1))]),e("el-link",{attrs:{type:a.isDanger?"danger":"info",href:t._f("fmtHref")(a.type,a.id)}},[t._v(t._s(a.text))])],1)})),0)],2)},i=[],n=(e("99af"),e("b1f8")),r={name:"to-do-list",components:{ElNewCard:n["a"]},props:{list:{type:Array,default:function(){return[]}},height:{type:String,default:"236px"}},filters:{fmtHref:function(t,a){var e="";switch(t){case"acctBudgetAmountLine":case"acctImprestAmountLine":case"acctAddAmountAppl":case"acctUseImpAppl":e="/#/crdtAcctMgmt/acctDetail";break;case"acctAppl":e="/#/crdtAcctMgmt/acctApplDetail";break;case"actBudgetAmountLine":case"actImprestAmountLine":case"actAmountLack":case"actAddAmountAppl":case"actUseImpAppl":case"actUnissue":e="/#/activityMgmt/actDetail";break;case"actAppl":e="/#/activityMgmt/actApplDetail";break;case"stmt":e="/#/settlementMgmt/settlementDetail";break}return"".concat(e,"?id=").concat(a)}}},l=r,o=(e("6080"),e("2877")),c=Object(o["a"])(l,s,i,!1,null,"733f7c4e",null);a["a"]=c.exports}}]);
//# sourceMappingURL=chunk-2acdb294.8616bc29.js.map