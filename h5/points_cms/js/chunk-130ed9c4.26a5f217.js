(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-130ed9c4"],{"02f5":function(t,e,a){},"2dad":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"popup-judgement-detail",attrs:{title:"决裁申请详情",width:"50%",visible:t.show,"destroy-on-close":""},on:{"update:visible":function(e){t.show=e},closed:t.onClose}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}]},[a("info-block",[a("info-item",{attrs:{label:"积分账户名称："}},[t._v(t._s(t.info.account))]),a("info-item",{attrs:{label:"申请种类："}},[t._v(t._s(t.info.type))]),a("info-item",{attrs:{label:"新增预算（元）："}},[t._v(t._s(t._f("fmtMoney")(t.info.newBudget)))]),a("info-item",{attrs:{label:"新增预算额度："}},[t._v(t._s(t._f("fmtMoney")(t.info.newBudgetAmount)))]),a("info-item",{attrs:{label:"新增备用金（元）："}},[t._v(t._s(t._f("fmtMoney")(t.info.newImprest)))]),a("info-item",{attrs:{label:"新增备用额度："}},[t._v(t._s(t._f("fmtMoney")(t.info.newImprestAmount)))])],1),a("info-block",[a("info-item",{attrs:{label:"申请人："}},[t._v(t._s(t.info.creater))]),a("info-item",{attrs:{label:"申请时间："}},[t._v(t._s(t._f("fmtDateTime")(t.info.createTime)))]),a("info-item",{attrs:{label:"编辑人："}},[t._v(t._s(t.info.editor))]),a("info-item",{attrs:{label:"编辑时间："}},[t._v(t._s(t._f("fmtDateTime")(t.info.editTime)))]),a("info-item",{attrs:{label:"申请状态："}},[a("appl-sts-icon",{attrs:{status:t.info.status}})],1),a("info-item",{attrs:{label:"审批时间："}},[t._v(t._s(t._f("fmtDateTime")(t.info.updateTime)))]),a("info-item",{attrs:{label:"申请理由：",block:""}},[t._v(t._s(t.info.reason))])],1),a("info-block",[a("info-item",{attrs:{label:"附件：",block:""}},[t.info.attachments?a("ul",{staticClass:"attachment-list"},t._l(t.info.attachments,(function(e,i){return a("li",{key:i},[a("span",[t._v(t._s(i+1)+". "+t._s(e.name))]),a("el-link",{attrs:{icon:"el-icon-download"},on:{click:function(a){return t.onDownLoad(e.url)}}},[t._v("下载")])],1)})),0):t._e()])],1),a("el-divider"),a("option-btns",{attrs:{status:t.isAppling,auth:t.optionsAuth,aid:t.info.id,type:"popup",verify:"serviceVerifyAppl"},on:{onEdit:t.toEditAppl,onCancel:t.changeCancel,onReject:t.changeNoPass,onPass:t.changePass,onClose:function(e){t.show=!1}}})],1)])},s=[],n=(a("a9e3"),a("d3b7"),a("5530")),o=a("fb55"),l=a("3355"),r=a("3c4e9"),c=a("fe54"),d=a("2f62"),u={name:"popup-judgement-detail",components:{InfoBlock:o["a"],InfoItem:l["a"],OptionBtns:r["a"],ApplStsIcon:c["a"]},model:{prop:"visible",event:"change"},props:{visible:Boolean,sid:[Number,String]},data:function(){return{show:!1,isLoading:!1,info:{}}},computed:Object(n["a"])({},Object(d["b"])({accountInfo:"getAccountInfo"}),{isAppling:function(){return 1===this.info.status||4===this.info.status?"isAppling":""},optionsAuth:function(){return this.accountInfo.isAdmin?"isAdmin":this.info.deptId===this.accountInfo.orgId?"isEditor":""}}),watch:{visible:function(t){this.show=t,t&&this.getData(this.sid)}},methods:{getData:function(t){var e=this;this.isLoading=!0,this.$http.serviceGetApplDetail({id:t}).then((function(t){e.info=Object(n["a"])({},t)})).finally((function(){e.isLoading=!1}))},toEditAppl:function(){this.$emit("popupEdit",this.sid)},changePass:function(){this.changeApplicationStatus(0)},changeNoPass:function(){this.changeApplicationStatus(2)},changeCancel:function(){this.changeApplicationStatus(3)},changeApplicationStatus:function(t){var e=this;this.isLoading=!0,this.$http.serviceUpdateAcctApplSts({status:t}).then((function(a){e.info.status=t})).finally((function(){e.isLoading=!1}))},onClose:function(){this.$emit("update:visible",this.show)}}},p=u,m=(a("b6fe"),a("2877")),f=Object(m["a"])(p,i,s,!1,null,"5971bde4",null);e["default"]=f.exports},"53ce":function(t,e,a){},"655d":function(t,e,a){"use strict";var i=a("cae6"),s=a.n(i);s.a},"9adc":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"account-detail"},[3===t.$route.matched.length?[a("el-row",{attrs:{gutter:t.gutter}},[a("el-col",{attrs:{span:18}},[a("el-new-card",[a("template",{slot:"header"},[a("div",[t._v(t._s(t.$route.meta.name)),a("acct-sts-icon",{attrs:{status:t.info.status,point:""}})],1)]),a("info-block",[a("info-item",{attrs:{label:"部门/企业名称："}},[t._v(t._s(t.info.deptName))]),a("info-item",{attrs:{label:"类型："}},[t._v(t._s(t.info.type))]),a("info-item",{attrs:{label:"所属："}},[t._v(t._s(t.info.ownership))]),a("info-item",{attrs:{label:"联系人："}},[t._v(t._s(t.info.contact))]),a("info-item",{attrs:{label:"手机号："}},[t._v(t._s(t.info.mobile))]),a("info-item",{attrs:{label:"邮箱："}},[t._v(t._s(t.info.email))])],1),a("div",{staticClass:"btns-box"},[a("el-button",{attrs:{icon:"el-icon-s-order",size:"small"},on:{click:t.popAttachments}},[t._v("查看附件")]),a("span",[a("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-document"},on:{click:t.toReport}},[t._v("查看报表")]),a("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-notebook-2"},on:{click:t.toCrtdDetail}},[t._v("查看明细")])],1)],1)],2)],1),a("el-col",{attrs:{span:6}},[a("to-do-list",{attrs:{list:t.toDo,height:"132px"}})],1)],1),a("today-data",{attrs:{gutter:t.gutter,data:t.todayData}}),a("el-row",{attrs:{gutter:t.gutter}},[a("el-col",{attrs:{span:18}},[a("el-new-card",[a("template",{slot:"header"},[a("div",[t._v(" 积分账户当前额度概览 "),a("span",{staticClass:"acct-sts",style:t._f("fmtAcctApplStatusColor")(2)},[a("i",{style:t._f("fmtAcctApplStatusColor")(2,"backgroundColor")}),t._v(" 提额申请中 ")])])]),a("amount-acct",{attrs:{data:t.amountData}}),a("div",{staticClass:"btns-box"},[a("span",[a("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-document-copy"},on:{click:t.popupChgRec}},[t._v("额度变更记录")]),a("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-tickets"},on:{click:t.popupUseRec}},[t._v("备用额度使用申请记录")])],1),t.isEditor?a("span",[a("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-document-checked"},on:{click:t.popupUseImp}},[t._v("申请使用备用额度")]),t.isGTMC?a("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-document-delete"},on:{click:t.popupJudgement}},[t._v("申请裁决")]):t._e(),a("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-document-add"},on:{click:t.popupAddAmt}},[t._v("申请额度")])],1):t._e()])],2)],1),a("el-col",{attrs:{span:6}},[a("el-new-card",[a("template",{slot:"header"},[a("strong",[t._v("进行中活动")]),a("span",{staticClass:"activities-nums"},[t._v("数量："+t._s(t.activitiesList.flat().length))])]),a("div",{staticClass:"activities-list"},[a("el-carousel",{ref:"activities",attrs:{height:"248px",autoplay:!1,arrow:"never","indicator-position":"none"}},t._l(t.activitiesList,(function(e,i){return a("el-carousel-item",{key:"page"+i},t._l(e,(function(e,s){return a("div",{key:"item"+s,staticClass:"activity-item"},[a("div",[a("i",[t._v(t._s(5*i+s+1+". "))]),a("el-link",{attrs:{type:"primary"}},[t._v(t._s(e.name))])],1),a("amount-bar",{attrs:{data:e.data}})],1)})),0)})),1),a("div",{staticClass:"carousel-arrow"},[a("el-link",{attrs:{underline:!1},on:{click:t.onPrevActPage}},[a("i",{staticClass:"el-icon-arrow-left"})]),a("el-link",{attrs:{underline:!1},on:{click:t.onNextActPage}},[a("i",{staticClass:"el-icon-arrow-right"})])],1)],1)],2)],1)],1),a("el-row",{attrs:{gutter:t.gutter}},[a("el-col",{attrs:{span:12}},[a("el-new-card",[a("template",{slot:"header"},[a("span",[t._v(" 全部活动（历史活动与当前活动）积分状态概览 "),a("el-popover",{attrs:{content:"统计本账户内全部活动的已发行，待发行，未发行三种状态下，积分数量的分布情况"}},[a("el-link",{attrs:{slot:"reference",underline:!1,icon:"el-icon-question"},slot:"reference"})],1)],1)]),a("chart-acct-cur-sts-overview",{attrs:{datas:t.curStsOverview}})],2)],1),a("el-col",{attrs:{span:12}},[a("el-new-card",[a("template",{slot:"header"},[a("span",[t._v(" 全部活动（历史活动与当前活动）未发行积分状态概览 "),a("el-popover",{attrs:{content:"统计本账户内所有活动的已冻结，已返还，已作废三种状态下，积分数量的分布情况"}},[a("el-link",{attrs:{slot:"reference",underline:!1,icon:"el-icon-question"},slot:"reference"})],1)],1)]),a("chart-unissue-sts-overview",{attrs:{datas:t.issueStsOverview}})],2)],1)],1),a("el-new-card",[a("el-form",{staticClass:"condition-bar",attrs:{inline:"",model:t.searchForm,size:"small"}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"活动状态"},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"已开始",value:1}}),a("el-option",{attrs:{label:"已暂停",value:2}}),a("el-option",{attrs:{label:"已重启",value:3}}),a("el-option",{attrs:{label:"已结束",value:4}})],1)],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"活动模式"},model:{value:t.searchForm.mode,callback:function(e){t.$set(t.searchForm,"mode",e)},expression:"searchForm.mode"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"线上",value:1}}),a("el-option",{attrs:{label:"线下",value:2}})],1)],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"业务归属"},model:{value:t.searchForm.bussiness,callback:function(e){t.$set(t.searchForm,"bussiness",e)},expression:"searchForm.bussiness"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"客户业务",value:1}}),a("el-option",{attrs:{label:"DLR业务",value:2}})],1)],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"活动类型"},model:{value:t.searchForm.type,callback:function(e){t.$set(t.searchForm,"type",e)},expression:"searchForm.type"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"常规",value:2}}),a("el-option",{attrs:{label:"节点",value:3}})],1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"活动名称",multiple:"","collapse-tags":""},on:{change:t.searchNameChange},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._l(t.actList,(function(t){return a("el-option",{key:"actList-"+t.id,attrs:{label:t.name,value:t.id}})}))],2)],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"认证状态"},model:{value:t.searchForm.verifiSts,callback:function(e){t.$set(t.searchForm,"verifiSts",e)},expression:"searchForm.verifiSts"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"已注册",value:1}}),a("el-option",{attrs:{label:"未注册",value:2}})],1)],1),a("el-form-item",[a("date-range",{model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),a("el-form-item",[a("el-button",{staticStyle:{"min-width":"75px"},attrs:{plain:"",type:"primary",loading:t.isChartsLoading},on:{click:t.searchData}},[t._v("查询")])],1)],1)],1),t.pointsData.pointsIssued?a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"积分发行/使用情况统计",lazy:""}},[a("div",{staticClass:"charts-header"},[t._v(t._s(t.fmtCDateRange)),a("el-link",{attrs:{underline:!1,icon:"el-icon-download"}})],1),a("div",{staticClass:"charts-box"},[a("chart-points-issued",{attrs:{datas:t.pointsData.pointsIssued}}),a("el-divider"),a("chart-points-usage",{attrs:{datas:t.pointsData.pointsUsage}}),a("el-divider"),a("chart-points-unused",{attrs:{datas:t.pointsData.pointsUnused}}),a("el-divider"),a("chart-points-verified",{attrs:{datas:t.pointsData.pointsVerified}}),a("el-divider"),a("chart-points-recyled",{attrs:{datas:t.pointsData.pointsRecyled}}),a("el-divider"),a("chart-points-chain",{attrs:{datas:t.pointsData.pointsChain}}),a("el-divider"),a("chart-points-growth-rate",{attrs:{datas:t.pointsData.pointsGrowthRate}}),a("el-divider"),a("chart-points-verified-src",{attrs:{datas:t.pointsData.pointsVerifiedSrc}}),a("el-divider"),a("chart-points-recyled-src",{attrs:{datas:t.pointsData.pointsRecyledSrc}})],1)]),a("el-tab-pane",{attrs:{label:"业务归属统计",lazy:""}},[a("div",{staticClass:"charts-header"},[t._v(t._s(t.fmtCDateRange)),a("el-link",{attrs:{underline:!1,icon:"el-icon-download"}})],1),a("div",{staticClass:"charts-box"},[a("chart-bus-chain",{attrs:{datas:t.bussinessData.busChain}}),a("el-divider"),a("chart-bus-growth-rate",{attrs:{datas:t.bussinessData.busGrowthRate}})],1)]),a("el-tab-pane",{attrs:{label:"活动效果统计",lazy:""}},[a("div",{staticClass:"charts-header"},[t._v(t._s(t.fmtCDateRange)),a("el-link",{attrs:{underline:!1,icon:"el-icon-download"}})],1),a("div",{staticClass:"charts-box"},[a("chart-part-user",{attrs:{datas:t.activityEffectData.partUser}}),a("el-divider"),a("chart-part-user-chain",{attrs:{datas:t.activityEffectData.partUserChain}}),a("el-divider"),a("chart-part-times",{attrs:{datas:t.activityEffectData.partTimes}}),a("el-divider"),a("chart-part-times-chain",{attrs:{datas:t.activityEffectData.partTimesChain}})],1)]),a("el-tab-pane",{attrs:{label:"活动类型/状态统计",lazy:""}},[a("div",{staticClass:"charts-header"},[t._v(t._s(t.fmtCDateRange)),a("el-link",{attrs:{underline:!1,icon:"el-icon-download"}})],1),a("div",{staticClass:"charts-box"},[a("chart-act-mode",{attrs:{datas:t.activityTypeData.actMode}}),a("el-divider"),a("chart-act-bus",{attrs:{datas:t.activityTypeData.actBus}}),a("el-divider"),a("chart-act-type",{attrs:{datas:t.activityTypeData.actType}}),a("el-divider"),a("chart-act-status",{attrs:{datas:t.activityTypeData.actStatus}})],1)]),a("el-tab-pane",{attrs:{label:"结算统计",lazy:""}},[a("div",{staticClass:"charts-header"},[t._v(t._s(t.fmtCDateRange)),a("el-link",{attrs:{underline:!1,icon:"el-icon-download"}})],1),a("div",{staticClass:"charts-box"},[a("chart-stmt-overview",{attrs:{datas:t.settlementData.overview}}),a("el-divider"),a("chart-stmt-sts-rec",{attrs:{datas:t.settlementData.stsRec}}),a("el-divider"),a("chart-stmt-sts-pay",{attrs:{datas:t.settlementData.stsPay}}),a("el-divider"),a("chart-stmt-dept-rec",{attrs:{datas:t.settlementData.deptRec}}),a("el-divider"),a("chart-stmt-dept-pay",{attrs:{datas:t.settlementData.deptPay}}),a("el-divider"),a("chart-stmt-records",{attrs:{search:t.searchForm}})],1)]),a("el-tab-pane",{attrs:{label:"商品统计",lazy:""}},[a("div",{staticClass:"charts-header"},[t._v(t._s(t.fmtCDateRange)),a("el-link",{attrs:{underline:!1,icon:"el-icon-download"}})],1),a("div",{staticClass:"charts-box"},[a("chart-goods",{attrs:{datas:t.goodsData.goods}}),a("el-divider"),a("chart-goods-chain",{attrs:{datas:t.goodsData.goodsChain}}),a("el-divider"),a("chart-goods-verified-source",{attrs:{datas:t.goodsData.verifiedSource}})],1)])],1):t._e(),a("popup-lmt-chg-rec",{attrs:{visible:t.chgRecVisible,id:t.id},on:{"update:visible":function(e){t.chgRecVisible=e},popupAct:t.popupActIntro,popupDtl:t.popupJudgementDetail}}),a("popup-use-imp-rec",{attrs:{visible:t.useRecVisible,id:t.id},on:{"update:visible":function(e){t.useRecVisible=e},popupDtl:t.popupUseImpDetail}}),a("popup-act-intro",{attrs:{visible:t.actIntroVisible,aid:t.selectedId},on:{"update:visible":function(e){t.actIntroVisible=e}}}),a("popup-add-amt-detail",{attrs:{visible:t.addAmtDtlVisible,sid:t.selectedId},on:{"update:visible":function(e){t.addAmtDtlVisible=e},popupEdit:t.popupAddAmt}}),a("popup-use-imp-detail",{attrs:{visible:t.useImpDtlVisible,sid:t.selectedId},on:{"update:visible":function(e){t.useImpDtlVisible=e},popupEdit:t.popupUseImp}}),a("popup-judgement-detail",{attrs:{visible:t.judgementDtlVisible,sid:t.selectedId},on:{"update:visible":function(e){t.judgementDtlVisible=e},popupEdit:t.popupJudgement}}),a("popup-add-amt",{attrs:{visible:t.addAmtVisible,sid:t.selectedId},on:{"update:visible":function(e){t.addAmtVisible=e}}}),a("popup-use-imp",{attrs:{visible:t.useImpVisible,sid:t.selectedId},on:{"update:visible":function(e){t.useImpVisible=e}}}),a("popup-judgement",{attrs:{visible:t.judgementVisible,sid:t.selectedId},on:{"update:visible":function(e){t.judgementVisible=e}}}),a("popup-atta",{attrs:{visible:t.attaVisible,fileList:t.info.attachments},on:{"update:visible":function(e){t.attaVisible=e}}})]:a("router-view")],2)},s=[],n=(a("45fc"),a("b0c0"),a("d3b7"),a("ac1f"),a("3ca3"),a("5319"),a("ddb0"),a("53ca")),o=a("5530"),l=a("b1f8"),r=a("ba46"),c=a("fb55"),d=a("3355"),u=a("d233"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"amount-container"},[a("div",{staticClass:"amount-inner"},[a("div",{staticClass:"amount-chart",attrs:{title:t.activitiesTips}},[a("div",{staticClass:"amount-budget",style:{width:t.budgetWidth}},[a("div",{staticClass:"budget-line",style:{left:t.budgetLinePos}}),a("div",{staticClass:"budget-used",style:{width:t.usedWidth}}),a("div",{staticClass:"budget-issued",style:{width:t.issuedWidth}})]),a("div",{staticClass:"amount-imprest",style:{width:t.imprestWidth}},[a("div",{staticClass:"imprest-line",style:{left:t.imprestLinePos}})])])])])},m=[],f=(a("99af"),a("8975")),h={name:"amount-bar",props:{data:{type:Object,required:!0}},computed:{budgetWidth:function(){var t=Object(f["a"])(this.data.budgetAmount/(this.data.budgetAmount+this.data.imprestAmount));return"-"===t?"50%":t},imprestWidth:function(){return 100-parseFloat(this.budgetWidth)+"%"},budgetLinePos:function(){return Object(f["a"])(this.data.budgetAmountLine)},imprestLinePos:function(){return Object(f["a"])(this.data.imprestAmountLine)},usedWidth:function(){return Object(f["a"])(this.data.usedAmount/(this.data.budgetAmount+this.data.imprestAmount))},issuedWidth:function(){return Object(f["a"])(this.data.issued/this.data.usedAmount)},activitiesTips:function(){return"预算额度：".concat(Object(f["b"])(this.data.budgetAmount),"\n预算费用（元）：").concat(Object(f["b"])(this.data.budget),"\n备用额度：").concat(Object(f["b"])(this.data.imprestAmount),"\n备用金（元）：").concat(Object(f["b"])(this.data.imprest),"\n已发行：").concat(Object(f["b"])(this.data.issued),"\n待发行：").concat(Object(f["b"])(this.data.unIssued))}}},b=h,v=(a("d16b"),a("2877")),g=Object(v["a"])(b,p,m,!1,null,"1e8d79a9",null),_=g.exports,y=a("5711"),D=a("fa2d"),A=a("9db7"),w=a("1ff6"),C=a("c1df"),I=a.n(C),L=a("f05f"),k=a("544c"),j=a("89b5"),x=a("5782"),$=a("2e7c"),O=a("2dad"),R=a("d6dd"),V=a("201b3"),P=a("c2bf"),S=a("5e34"),T=a("2f62"),E={name:"account-detail",mixins:[w["a"]],components:{ElNewCard:l["a"],TodayData:r["a"],InfoBlock:c["a"],InfoItem:d["a"],AmountAcct:u["a"],AmountBar:_,AcctStsIcon:y["a"],ToDoList:D["a"],DateRange:A["a"],PopupLmtChgRec:L["default"],PopupUseImpRec:k["default"],PopupActIntro:j["default"],PopupAddAmtDetail:x["default"],PopupUseImpDetail:$["default"],PopupJudgementDetail:O["default"],PopupAddAmt:R["default"],PopupUseImp:V["default"],PopupJudgement:P["default"],PopupAtta:S["default"]},data:function(){return{id:0,gutter:40,amountData:{},toDo:[],todayData:[],actList:[],searchForm:{status:null,mode:null,bussiness:null,type:null,name:[],verifiSts:null,startTime:null,endTime:null},dateRange:[],isLoading:!1,isChartsLoading:!1,fmtCDateRange:"",info:{},activitiesList:[],curStsOverview:[],issueStsOverview:[],selectedId:0,chgRecVisible:!1,useRecVisible:!1,actIntroVisible:!1,addAmtDtlVisible:!1,useImpDtlVisible:!1,judgementDtlVisible:!1,addAmtVisible:!1,useImpVisible:!1,judgementVisible:!1,attaVisible:!1}},computed:Object(o["a"])({},Object(T["b"])({accountInfo:"getAccountInfo"}),{isEditor:function(){return this.info.deptId===this.accountInfo.orgId},isGTMC:function(){return 1===this.accountInfo.orgId}}),watch:{dateRange:function(t){this.searchForm.startTime=t[0],this.searchForm.endTime=t[1]},isChartsLoading:function(t){if(!t){var e=this.dateRange[0]?I()(this.dateRange[0]).format("YYYY年MM月DD日 HH时mm分"):"",a=I()(this.dateRange[1]?this.dateRange[1]:I()()).format("YYYY年MM月DD日 HH时mm分");this.fmtCDateRange=e+" 至 "+a}}},created:function(){this.id=this.$route.query.id,this.id?this.getData(this.id):this.$router.replace("/404")},methods:{getData:function(t){var e=this;this.isLoading=!0,Promise.all([this.$http.serviceGetAcctDetail({id:t}),this.$http.serviceGetAcctActList({id:t})]).then((function(t){e.info=t[0].info,e.amountData=t[0].amountData,e.todayData=t[0].todayData,e.toDo=t[0].toDoList,e.curStsOverview=t[0].pointsOverview,e.issueStsOverview=t[0].unissuedOverview,e.activitiesList=t[0].underWayAct,e.actList=t[1]})).finally((function(){e.isLoading=!1}))},onPrevActPage:function(){this.$refs.activities.prev()},onNextActPage:function(){this.$refs.activities.next()},toReport:function(){this.$router.push({path:"/crdtAcctMgmt/acctDetail/acctReport",query:{id:this.$route.query.id}})},toCrtdDetail:function(){this.$router.push({path:"/crdtAcctMgmt/acctDetail/crdtDetail",query:{id:this.$route.query.id}})},popupChgRec:function(){this.chgRecVisible=!0},popupUseRec:function(){this.useRecVisible=!0},popupActIntro:function(t){this.selectedId=t,this.actIntroVisible=!0},popupAddAmtDetail:function(t){this.selectedId=t,this.addAmtDtlVisible=!0},popupJudgementDetail:function(t){this.selectedId=t,this.judgementDtlVisible=!0},popupUseImpDetail:function(t){this.selectedId=t,this.useImpDtlVisible=!0},popupAddAmt:function(t){this.selectedId="object"!==Object(n["a"])(t)?t:null,this.addAmtVisible=!0},popupUseImp:function(t){this.selectedId="object"!==Object(n["a"])(t)?t:null,this.useImpVisible=!0},popupJudgement:function(t){this.selectedId="object"!==Object(n["a"])(t)?t:null,this.judgementVisible=!0},popAttachments:function(){this.attaVisible=!0},searchData:function(){var t=this;this.isChartsLoading=!0,this.$http.serviceChartsData(this.searchForm).then((function(e){t.pointsData=e.pointsData,t.bussinessData=e.bussinessData,t.activityEffectData=e.activityEffectData,t.activityTypeData=e.activityTypeData,t.settlementData=e.settlementData,t.goodsData=e.goodsData})).finally((function(){t.isChartsLoading=!1}))},searchNameChange:function(t){t.some((function(t){return""===t}))&&(this.searchForm.name=[""])}}},F=E,W=(a("9ca3"),Object(v["a"])(F,i,s,!1,null,"46ad46ec",null));e["default"]=W.exports},"9ca3":function(t,e,a){"use strict";var i=a("53ce"),s=a.n(i);s.a},b6fe:function(t,e,a){"use strict";var i=a("02f5"),s=a.n(i);s.a},c2bf:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"popup-judgement",attrs:{title:"决裁申请",width:"50%",visible:t.show,"destroy-on-close":"","before-close":t.onCancel},on:{"update:visible":function(e){t.show=e},closed:t.onClose}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v(" 决裁申请"),a("span",{staticClass:"desc"},[a("i",[t._v("*")]),t._v("为必填项")]),a("appl-sts-icon",{attrs:{status:t.form.status,point:""}})],1),a("el-form",{directives:[{name:"loading",rawName:"v-loading.lock",value:t.isLoading,expression:"isLoading",modifiers:{lock:!0}}],ref:"form",attrs:{model:t.form,size:"small","label-width":"180px",rules:t.rules,"hide-required-asterisk":!1}},[a("el-form-item",{staticStyle:{"margin-bottom":"8px"},attrs:{label:"申请时间："}},[t._v(t._s(t._f("fmtCDate")(t.form.createTime)))]),a("el-form-item",{staticStyle:{"margin-bottom":"8px"},attrs:{label:"积分账户名称："}},[t._v(t._s(t.form.account))]),a("el-form-item",{staticStyle:{"margin-bottom":"8px"},attrs:{label:"申请人："}},[t._v(t._s(t.form.creater))]),a("el-form-item",{attrs:{label:"选择申请种类：",prop:"type"}},[a("el-select",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-option",{attrs:{label:"全部",value:1}}),a("el-option",{attrs:{label:"预算额度",value:2}}),a("el-option",{attrs:{label:"备用额度",value:3}})],1)],1),3!==t.form.type?[a("el-form-item",{attrs:{label:"新增预算（元）：",prop:"budget"}},[a("el-input",{attrs:{placeholder:"请输入新增预算（元）"},model:{value:t.form.budget,callback:function(e){t.$set(t.form,"budget",e)},expression:"form.budget"}})],1),a("el-form-item",{attrs:{label:"新增预算额度：",prop:"budgetAmount"}},[a("el-input",{attrs:{placeholder:"请输入新增预算额度"},model:{value:t.form.budgetAmount,callback:function(e){t.$set(t.form,"budgetAmount",e)},expression:"form.budgetAmount"}})],1)]:t._e(),2!==t.form.type?[a("el-form-item",{attrs:{label:"新增备用金（元）：",prop:"imprest"}},[a("el-input",{attrs:{placeholder:"请输入新增备用金（元）"},model:{value:t.form.imprest,callback:function(e){t.$set(t.form,"imprest",e)},expression:"form.imprest"}})],1),a("el-form-item",{attrs:{label:"新增备用额度：",prop:"imprestAmount"}},[a("el-input",{attrs:{placeholder:"请输入新增备用额度"},model:{value:t.form.imprestAmount,callback:function(e){t.$set(t.form,"imprestAmount",e)},expression:"form.imprestAmount"}})],1)]:t._e(),a("el-form-item",{attrs:{label:"申请理由：",prop:"reason"}},[a("el-input",{attrs:{type:"textarea","show-word-limit":"",maxlength:300,rows:3,autosize:{minRows:2,maxRows:6},placeholder:"请输入申请理由"},model:{value:t.form.reason,callback:function(e){t.$set(t.form,"reason",e)},expression:"form.reason"}})],1),a("el-form-item",{attrs:{label:"附件上传："}},[a("attachment",{attrs:{list:t.form.attachments,size:"small"}})],1),a("el-form-item",[a("el-button",{attrs:{plain:""},on:{click:t.onCancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.onVerily}},[t._v(t._s(t.isEditPage?"保 存":"提 交"))])],1)],2)],1)},s=[],n=(a("b0c0"),a("a9e3"),a("d3b7"),a("5530")),o=a("f509"),l=a("fe54"),r=a("2f62"),c={name:"popup-judgement",components:{Attachment:o["a"],ApplStsIcon:l["a"]},model:{prop:"visible",event:"change"},props:{visible:Boolean,sid:[Number,String]},data:function(){return{isEditPage:!1,show:!1,isLoading:!1,form:{},rules:{type:[{required:!0,message:"请选择申请种类",trigger:"change"}],budget:[{required:!0,pattern:/^\d{1,15}$/,message:"请填写整数数字，长度不能超出15个数字",trigger:"blur"}],budgetAmount:[{required:!0,pattern:/^\d{1,15}$/,message:"请填写整数数字，长度不能超出15个数字",trigger:"blur"}],imprest:[{required:!0,pattern:/^\d{1,15}$/,message:"请填写整数数字，长度不能超出15个数字",trigger:"blur"}],imprestAmount:[{required:!0,pattern:/^\d{1,15}$/,message:"请填写整数数字，长度不能超出15个数字",trigger:"blur"}],reason:[{required:!0,message:"请输入申请理由，长度不能超出300个汉字",trigger:"blur"}]}}},computed:Object(n["a"])({},Object(r["b"])({accountInfo:"getAccountInfo"})),watch:{visible:function(t){this.show=t,t&&(this.sid?(this.isEditPage=!0,this.getData(this.sid)):this.form={createTime:new Date,account:this.accountInfo.account,creater:this.accountInfo.name})}},methods:{getData:function(t){var e=this;this.isLoading=!0,this.$http.serviceGetApplEditDetail({id:t}).then((function(t){e.form=Object(n["a"])({},t)})).finally((function(){e.isLoading=!1}))},onClose:function(){this.$emit("update:visible",this.show)},onVerily:function(){var t=this;this.$refs.form.validate((function(e){if(!e||t.overAmount)return!1;t.$confirm("是否".concat(t.isEditPage?"保存修改":"确认提交","？")).then((function(){t.onSubmit()}))}))},onSubmit:function(){var t=this;this.isLoading=!0,this.$http.serviceCreateAppl(this.form).then((function(e){t.$message.success("提交成功"),t.show=!1})).catch((function(e){!e.code&&e.name?Promise.reject(e):t.$alert(e.message,"提交失败",{type:"error"})})).finally((function(){t.isLoading=!1}))},onCancel:function(){var t=this;this.$confirm("是否取消".concat(this.isEditPage?"编辑":"申请","？"),"取消确认",{type:"error"}).then((function(){t.isEditPage=!1,t.show=!1,t.form={}}))}}},d=c,u=(a("d686"),a("2877")),p=Object(u["a"])(d,i,s,!1,null,"3c75b72a",null);e["default"]=p.exports},cae6:function(t,e,a){},d16b:function(t,e,a){"use strict";var i=a("f28c"),s=a.n(i);s.a},d233:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"amount-container"},[a("div",{staticClass:"amount-inner"},[a("ul",{staticClass:"amount-datas",class:{hasLine:t.hasLine}},[a("li",[a("label",[t._v("当前额度")]),a("span",[t._v(t._s(t._f("fmtMoney")(t.data.totalAmount)))])]),a("li",[a("label",[t._v("已用额度")]),a("span",[t._v(t._s(t._f("fmtMoney")(t.data.usedAmount)))])]),a("li",[a("label",[t._v("可用额度")]),a("span",[t._v(t._s(t._f("fmtMoney")(t.data.availableAmount)))])]),t.hasLine?a("li",[a("label",[t._v("预算额度警戒线")]),a("span",[t._v(t._s(t._f("fmtFloat2Percent")(t.data.budgetAmountLine)))])]):t._e(),a("li",[a("label",[t._v("预算额度")]),a("span",[t._v(t._s(t._f("fmtMoney")(t.data.budgetAmount)))])]),a("li",[a("label",[t._v("备用额度")]),a("span",[t._v(t._s(t._f("fmtMoney")(t.data.imprestAmount)))])]),a("li",[a("label",[t._v("已发行积分")]),a("span",[t._v(t._s(t._f("fmtMoney")(t.data.issued)))])]),t.hasLine?a("li",[a("label",[t._v("备用额度警戒线")]),a("span",[t._v(t._s(t._f("fmtFloat2Percent")(t.data.imprestAmountLine)))])]):t._e()]),a("div",{staticClass:"amount-chart"},[a("div",{staticClass:"amount-budget",style:{width:t.budgetWidth},attrs:{title:t.budgetTips}},[a("label",[t._v("预算额度")]),t.hasLine&&t.data.budgetAmountLine?a("div",{staticClass:"budget-line",style:{left:t.budgetLinePos}}):t._e()]),a("div",{staticClass:"amount-imprest",style:{width:t.imprestWidth},attrs:{title:t.imprestTips}},[a("label",[t._v("备用额度")]),t.hasLine&&t.data.imprestAmountLine?a("div",{staticClass:"imprest-line",style:{left:t.imprestLinePos}}):t._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:"-"!==t.usedWidth,expression:"usedWidth !== '-'"}],staticClass:"budget-used",style:{width:t.usedWidth}},[a("span",[t._v("已用额度："),a("strong",[t._v(t._s(t.usedWidth))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"-"!==t.issuedWidth,expression:"issuedWidth !== '-'"}],staticClass:"budget-issued",style:{width:t.issuedWidth}},[a("span",[t._v("已发行："),a("strong",[t._v(t._s(t.issuedWidth))])])])])])])])},s=[],n=a("8975"),o={name:"amount-acct",props:{data:{type:Object,required:!0},hasLine:{type:Boolean,default:!0}},computed:{budgetWidth:function(){var t=Object(n["a"])(this.data.budgetAmount/(this.data.budgetAmount+this.data.imprestAmount));return"-"===t?"50%":t},imprestWidth:function(){return 100-parseFloat(this.budgetWidth)+"%"},budgetLinePos:function(){return Object(n["a"])(this.data.budgetAmountLine)},imprestLinePos:function(){return Object(n["a"])(this.data.imprestAmountLine)},usedWidth:function(){return Object(n["a"])(this.data.usedAmount/(this.data.budgetAmount+this.data.imprestAmount))},issuedWidth:function(){return Object(n["a"])(this.data.issued/this.data.usedAmount)},budgetTips:function(){return"预算费用（元）："+Object(n["b"])(this.data.budget)},imprestTips:function(){return"备用金（元）："+Object(n["b"])(this.data.imprest)}}},l=o,r=(a("655d"),a("2877")),c=Object(r["a"])(l,i,s,!1,null,"bff7fb10",null);e["a"]=c.exports},d686:function(t,e,a){"use strict";var i=a("d73b"),s=a.n(i);s.a},d73b:function(t,e,a){},f28c:function(t,e,a){}}]);
//# sourceMappingURL=chunk-130ed9c4.26a5f217.js.map