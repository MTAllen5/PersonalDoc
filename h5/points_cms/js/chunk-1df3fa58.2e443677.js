(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1df3fa58"],{"0095":function(t,e,a){},"12d5":function(t,e,a){"use strict";var i=a("da48"),s=a.n(i);s.a},"1dec":function(t,e,a){"use strict";var i=a("5552"),s=a.n(i);s.a},3237:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-application-detail"},[a("el-new-card",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}]},[a("template",{slot:"header"},[a("div",[t._v(" "+t._s(t.$route.meta.name)+" "),a("act-appl-sts-icon",{attrs:{status:t.info.status,point:""}})],1)]),a("div",[a("h5",{staticClass:"sub-title"},[t._v("活动信息")]),a("info-block",[a("info-item",{attrs:{label:"活动名称："}},[t._v(t._s(t.info.name))]),a("info-item",{attrs:{label:"所属部门："}},[t._v(t._s(t.info.deptName))]),a("info-item",{attrs:{label:"积分账户名称："}},[t._v(t._s(t.info.account)),a("acct-sts-icon",{attrs:{status:t.info.acctStatus}})],1),a("info-item",{attrs:{label:"担当："}},[t._v(t._s(t.info.creater))]),a("info-item",{attrs:{label:"业务归属："}},[t._v(t._s(t.info.busType))]),a("info-item",{attrs:{label:"活动模式："}},[t._v(t._s(t.info.mode))]),a("info-item",{attrs:{label:"活动类型："}},[t._v(t._s(t.info.type))]),a("info-item",{attrs:{label:"平台："}},[t._v(t._s(t.info.plat))]),a("info-item",{attrs:{label:"开始时间："}},[t._v(t._s(t._f("fmtDateTime")(t.info.startTime)))]),a("info-item",{attrs:{label:"结束时间："}},[t._v(t._s(t._f("fmtDateTime")(t.info.endTime)))]),a("info-item",{attrs:{label:"累计活动天数："}},[t._v(t._s(t.info.days))]),a("info-item",{attrs:{label:"活动简介："}},[t._v(t._s(t.info.intro))])],1),a("info-block",[a("info-item",{attrs:{label:"申请人："}},[t._v(t._s(t.info.creater||"-"))]),a("info-item",{attrs:{label:"申请时间："}},[t._v(t._s(t._f("fmtDateTime")(t.info.createTime)))]),a("info-item",{attrs:{label:"编辑人："}},[t._v(t._s(t.info.editer||"-"))]),a("info-item",{attrs:{label:"编辑时间："}},[t._v(t._s(t.info.editTime||"-"))]),a("info-item",{attrs:{label:"审批时间："}},[t._v(t._s(t.info.updateTime||"-"))])],1),a("div",{staticClass:"btns"},[a("el-button",{attrs:{icon:"el-icon-s-order",size:"small"},on:{click:t.popAttachments}},[t._v("查看附件")]),a("option-btns",{attrs:{status:t.isAppling,auth:t.optionsAuth,aid:t.id,verify:"serviceVerifyAppl"},on:{onEdit:t.toEditAct,onCancel:t.changeCancel,onReject:t.changeNoPass,onPass:t.changePass,onClose:t.goBack}})],1),a("el-divider"),a("h5",{staticClass:"sub-title"},[t._v(" 积分账户额度 "),a("span",{staticClass:"app-sts",style:{color:"#f60"}},[a("i",{style:{backgroundColor:"#f60"}}),t._v(" 提额申请中 ")])]),a("amount-acct",{attrs:{data:t.acctAmountInfo}}),a("el-divider"),a("h5",{staticClass:"sub-title"},[t._v("积分池配置")]),a("amount-config",{attrs:{data:t.configAmountInfo}}),a("el-divider"),a("h5",{staticClass:"sub-title"},[t._v("业务规则")]),a("div",{staticClass:"rule-parts"},[a("h5",{staticClass:"sub-title"},[t._v("活动整体规则配置")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.info.wholeRules,stripe:""}},[a("el-table-column",{attrs:{prop:"rid",label:"规则ID",align:"center",width:"120px"}}),a("el-table-column",{attrs:{prop:"name",label:"规则名称","min-width":"130px"}}),a("el-table-column",{attrs:{prop:"desc",label:"规则说明","min-width":"150px"}}),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间",align:"center",width:"150px"}},[t._v(t._s(t._f("fmtDateTime")(new Date)))]),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间",align:"center",width:"150px"}},[t._v(t._s(t._f("fmtDateTime")(new Date)))]),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"100px"}},[t._v("未开始")])],1),a("h5",{staticClass:"sub-title"},[t._v("用户行为规则配置 - 发行")]),t._l(t.info.behaviorIssueRules,(function(e){return[a("h5",{key:"issue-title"+e.id,staticClass:"sub-title",staticStyle:{"margin-top":"40px"}},[a("span",[t._v(t._s(e.name)),a("i",[t._v("未开始")])]),a("div",[a("div",[a("strong",[t._v("开始时间: ")]),t._v("活动同步")]),a("div",[a("strong",[t._v("结束时间: ")]),t._v("活动同步")])])]),a("el-table",{key:"issue-table"+e.id,staticStyle:{width:"100%"},attrs:{data:e.rules,stripe:""}},[a("el-table-column",{attrs:{prop:"rid",label:"规则ID",align:"center",width:"120px"}}),a("el-table-column",{attrs:{prop:"name",label:"规则名称","min-width":"130px"}}),a("el-table-column",{attrs:{prop:"desc",label:"规则说明","min-width":"150px"}}),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间",align:"center",width:"150px"}},[t._v(t._s(t._f("fmtDateTime")(new Date)))]),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间",align:"center",width:"150px"}},[t._v(t._s(t._f("fmtDateTime")(new Date)))])],1)]})),a("h5",{staticClass:"sub-title"},[t._v("用户行为规则配置 - 核销")]),t._l(t.info.behaviorVerifiRules,(function(e){return[a("h5",{key:"issue-title"+e.id,staticClass:"sub-title",staticStyle:{"margin-top":"40px"}},[a("span",[t._v(t._s(e.name)),a("i",[t._v("未开始")])]),a("div",[a("div",[a("strong",[t._v("开始时间: ")]),t._v("活动同步")]),a("div",[a("strong",[t._v("结束时间: ")]),t._v("活动同步")])])]),a("el-table",{key:"verifi-table"+e.id,staticStyle:{width:"100%"},attrs:{data:e.rules,stripe:""}},[a("el-table-column",{attrs:{prop:"rid",label:"规则ID",align:"center",width:"120px"}}),a("el-table-column",{attrs:{prop:"name",label:"规则名称","min-width":"130px"}}),a("el-table-column",{attrs:{prop:"desc",label:"规则说明","min-width":"150px"}}),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间",align:"center",width:"150px"}},[t._v(t._s(t._f("fmtDateTime")(new Date)))]),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间",align:"center",width:"150px"}},[t._v(t._s(t._f("fmtDateTime")(new Date)))])],1)]}))],2)],1)],2),a("popup-atta",{attrs:{visible:t.attaVisible,fileList:t.info.attachments},on:{"update:visible":function(e){t.attaVisible=e}}})],1)},s=[],n=(a("d3b7"),a("ac1f"),a("5319"),a("5530")),o=a("b1f8"),l=a("fb55"),c=a("3355"),r=a("3c4e9"),u=a("d233"),d=a("6aef"),f=a("5711"),p=a("9436"),m=a("5e34"),_=a("2f62"),b={name:"account-application-detail",components:{ElNewCard:o["a"],InfoBlock:l["a"],InfoItem:c["a"],OptionBtns:r["a"],AmountAcct:u["a"],AmountConfig:d["a"],AcctStsIcon:f["a"],ActApplStsIcon:p["a"],PopupAtta:m["default"]},data:function(){return{id:"",info:{status:-1},acctAmountInfo:{},configAmountInfo:{},isLoading:!1,attaVisible:!1}},computed:Object(n["a"])({},Object(_["b"])({accountInfo:"getAccountInfo"}),{isAppling:function(){return 0===this.info.status||3===this.info.status?"isAppling":""},optionsAuth:function(){return this.accountInfo.isAdmin?"isAdmin":this.info.deptId===this.accountInfo.orgId?"isEditor":""}}),created:function(){this.id=this.$route.query.id,this.id?this.getDetail(this.id):this.$router.replace("/404")},methods:{getDetail:function(t){var e=this;this.isLoading=!0,this.$http.serviceGetActApplDetail({id:t}).then((function(t){e.info=t.info,e.acctAmountInfo=t.acctAmountInfo,e.configAmountInfo=t.configAmountInfo})).finally((function(){e.isLoading=!1}))},toEditAct:function(){this.$router.push("/activityMgmt/editActAppl?id=".concat(this.id))},changePass:function(){this.changeApplicationStatus(0)},changeNoPass:function(){this.changeApplicationStatus(3)},changeCancel:function(){this.changeApplicationStatus(4)},changeApplicationStatus:function(t){var e=this;this.isLoading=!0,this.$http.serviceUpdateAcctApplSts({status:t}).then((function(a){e.info.status=t})).finally((function(){e.isLoading=!1}))},goBack:function(){this.$router.go(-1)},popAttachments:function(){this.attaVisible=!0}}},v=b,h=(a("e335"),a("2877")),g=Object(h["a"])(v,i,s,!1,null,"b642dad6",null);e["default"]=g.exports},5552:function(t,e,a){},5711:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"sts-icon",class:t._f("fmtStatusColor")(t.status),style:{marginLeft:t.point?"20px":0}},[t.point&&void 0!==t.status?a("i"):t._e(),t._v(t._s(t._f("fmtStatus")(t.status))+" ")])},s=[],n=(a("a9e3"),{0:"已关闭",1:"正常",2:"申请中",3:"已编辑",4:"未通过",5:"已取消"}),o={name:"acct-sts-icon",props:{status:[Number,String],point:Boolean},filters:{fmtStatus:function(t){return void 0===t?"":n[t]?n[t]:"未知"},fmtStatusColor:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(n[t]){case"已关闭":return"color-red";case"正常":return"color-green";case"申请中":case"未通过":case"已取消":case"已编辑":return"color-orange";default:return"color-black"}}}},l=o,c=(a("12d5"),a("2877")),r=Object(c["a"])(l,i,s,!1,null,"57f002a8",null);e["a"]=r.exports},"655d":function(t,e,a){"use strict";var i=a("cae6"),s=a.n(i);s.a},9436:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"sts-icon",class:t._f("fmtStatusColor")(t.status),style:{marginLeft:t.point?"20px":0}},[t.point&&void 0!==t.status?a("i"):t._e(),t._v(t._s(t._f("fmtStatus")(t.status))+" ")])},s=[],n=(a("a9e3"),{"00":"申请中","01":"已通过","02":"未通过","03":"已编辑",30:"已取消"}),o={name:"act-appl-sts-icon",props:{status:[Number,String],point:Boolean},filters:{fmtStatus:function(t){return void 0===t?"":n[t]?n[t]:"未知"},fmtStatusColor:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(n[t]){case"已通过":return"color-green";case"申请中":case"已编辑":return"color-orange";case"未通过":return"color-red";case"已取消":return"color-black";default:return"color-black"}}}},l=o,c=(a("1dec"),a("2877")),r=Object(c["a"])(l,i,s,!1,null,"453ada8c",null);e["a"]=r.exports},cae6:function(t,e,a){},d233:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"amount-container"},[a("div",{staticClass:"amount-inner"},[a("ul",{staticClass:"amount-datas",class:{hasLine:t.hasLine}},[a("li",[a("label",[t._v("当前额度")]),a("span",[t._v(t._s(t._f("fmtMoney")(t.data.totalAmount)))])]),a("li",[a("label",[t._v("已用额度")]),a("span",[t._v(t._s(t._f("fmtMoney")(t.data.usedAmount)))])]),a("li",[a("label",[t._v("可用额度")]),a("span",[t._v(t._s(t._f("fmtMoney")(t.data.availableAmount)))])]),t.hasLine?a("li",[a("label",[t._v("预算额度警戒线")]),a("span",[t._v(t._s(t._f("fmtFloat2Percent")(t.data.budgetAmountLine)))])]):t._e(),a("li",[a("label",[t._v("预算额度")]),a("span",[t._v(t._s(t._f("fmtMoney")(t.data.budgetAmount)))])]),a("li",[a("label",[t._v("备用额度")]),a("span",[t._v(t._s(t._f("fmtMoney")(t.data.imprestAmount)))])]),a("li",[a("label",[t._v("已发行积分")]),a("span",[t._v(t._s(t._f("fmtMoney")(t.data.issued)))])]),t.hasLine?a("li",[a("label",[t._v("备用额度警戒线")]),a("span",[t._v(t._s(t._f("fmtFloat2Percent")(t.data.imprestAmountLine)))])]):t._e()]),a("div",{staticClass:"amount-chart"},[a("div",{staticClass:"amount-budget",style:{width:t.budgetWidth},attrs:{title:t.budgetTips}},[a("label",[t._v("预算额度")]),t.hasLine&&t.data.budgetAmountLine?a("div",{staticClass:"budget-line",style:{left:t.budgetLinePos}}):t._e()]),a("div",{staticClass:"amount-imprest",style:{width:t.imprestWidth},attrs:{title:t.imprestTips}},[a("label",[t._v("备用额度")]),t.hasLine&&t.data.imprestAmountLine?a("div",{staticClass:"imprest-line",style:{left:t.imprestLinePos}}):t._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:"-"!==t.usedWidth,expression:"usedWidth !== '-'"}],staticClass:"budget-used",style:{width:t.usedWidth}},[a("span",[t._v("已用额度："),a("strong",[t._v(t._s(t.usedWidth))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"-"!==t.issuedWidth,expression:"issuedWidth !== '-'"}],staticClass:"budget-issued",style:{width:t.issuedWidth}},[a("span",[t._v("已发行："),a("strong",[t._v(t._s(t.issuedWidth))])])])])])])])},s=[],n=a("8975"),o={name:"amount-acct",props:{data:{type:Object,required:!0},hasLine:{type:Boolean,default:!0}},computed:{budgetWidth:function(){var t=Object(n["a"])(this.data.budgetAmount/(this.data.budgetAmount+this.data.imprestAmount));return"-"===t?"50%":t},imprestWidth:function(){return 100-parseFloat(this.budgetWidth)+"%"},budgetLinePos:function(){return Object(n["a"])(this.data.budgetAmountLine)},imprestLinePos:function(){return Object(n["a"])(this.data.imprestAmountLine)},usedWidth:function(){return Object(n["a"])(this.data.usedAmount/(this.data.budgetAmount+this.data.imprestAmount))},issuedWidth:function(){return Object(n["a"])(this.data.issued/this.data.usedAmount)},budgetTips:function(){return"预算费用（元）："+Object(n["b"])(this.data.budget)},imprestTips:function(){return"备用金（元）："+Object(n["b"])(this.data.imprest)}}},l=o,c=(a("655d"),a("2877")),r=Object(c["a"])(l,i,s,!1,null,"bff7fb10",null);e["a"]=r.exports},da48:function(t,e,a){},e335:function(t,e,a){"use strict";var i=a("0095"),s=a.n(i);s.a}}]);
//# sourceMappingURL=chunk-1df3fa58.2e443677.js.map