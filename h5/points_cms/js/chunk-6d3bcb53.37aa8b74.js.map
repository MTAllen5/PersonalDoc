{"version":3,"sources":["webpack:///./src/views/popups/PopupUseImp.vue?1bf4","webpack:///src/views/popups/PopupUseImp.vue","webpack:///./src/views/popups/PopupUseImp.vue?19c0","webpack:///./src/views/popups/PopupUseImp.vue","webpack:///./src/components/Attachment.vue?894f","webpack:///./src/views/popups/PopupUseImp.vue?8416","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./node_modules/core-js/modules/es.array.find-index.js","webpack:///./src/components/Attachment.vue?c19f","webpack:///src/components/Attachment.vue","webpack:///./src/components/Attachment.vue?6d27","webpack:///./src/components/Attachment.vue","webpack:///./src/components/status/ApplStsIcon.vue?2b54","webpack:///./src/components/status/ApplStsIcon.vue?ab07","webpack:///src/components/status/ApplStsIcon.vue","webpack:///./src/components/status/ApplStsIcon.vue?1545","webpack:///./src/components/status/ApplStsIcon.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","show","onCancel","on","$event","onClose","slot","_v","form","status","directives","name","rawName","value","expression","modifiers","ref","rules","staticStyle","_s","account","_f","budgetAmount","availableAmount","imprestAmount","createTime","creater","editTime","editer","_e","minRows","maxRows","model","callback","$$v","$set","attachments","onVerily","isEditPage","staticRenderFns","components","prop","event","props","visible","Boolean","sid","Number","String","data","isLoading","reason","computed","watch","val","getData","Date","accountInfo","methods","$http","serviceGetApplEditDetail","$emit","$refs","validate","valid","onSubmit","serviceCreateAppl","$confirm","component","$","toAbsoluteIndex","toInteger","toLength","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","ACCESSORS","0","1","max","Math","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","target","proto","forced","splice","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","len","length","actualStart","argumentsLength","arguments","TypeError","$findIndex","findIndex","addToUnscopables","FIND_INDEX","SKIPS_HOLES","Array","callbackfn","undefined","class","isSmall","size","beforeUpload","handleSuccess","handleError","handleProgress","fileList","isUploading","scopedSlots","_u","key","fn","scope","row","onDownLoad","url","onRemoveAttachment","fid","list","type","default","handler","immediate","filters","fmtSize","parseInt","parseFloat","toFixed","fmtName","format","isMatchType","$message","error","isLt20M","push","response","body","err","idx","style","marginLeft","point","2","3","4","fmtStatus","fmtStatusColor","STATUS"],"mappings":"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","file":"js/chunk-6d3bcb53.37aa8b74.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{staticClass:\"popup-use-imprest\",attrs:{\"title\":\"备用额度使用申请\",\"width\":\"50%\",\"visible\":_vm.show,\"destroy-on-close\":\"\",\"before-close\":_vm.onCancel},on:{\"update:visible\":function($event){_vm.show=$event},\"closed\":_vm.onClose}},[_c('div',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\" 备用额度使用申请\"),_c('span',{staticClass:\"desc\"},[_c('i',[_vm._v(\"*\")]),_vm._v(\"为必填项\")]),_c('appl-sts-icon',{attrs:{\"status\":_vm.form.status,\"point\":\"\"}})],1),_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading.lock\",value:(_vm.isLoading),expression:\"isLoading\",modifiers:{\"lock\":true}}],ref:\"form\",attrs:{\"model\":_vm.form,\"size\":\"small\",\"label-width\":\"180px\",\"rules\":_vm.rules,\"hide-required-asterisk\":false}},[_c('el-form-item',{staticStyle:{\"margin-bottom\":\"0\"},attrs:{\"label\":\"积分账户名称：\"}},[_vm._v(_vm._s(_vm.form.account))]),_c('el-form-item',{staticStyle:{\"margin-bottom\":\"0\"},attrs:{\"label\":\"申请时预算额度：\"}},[_vm._v(_vm._s(_vm._f(\"fmtMoney\")(_vm.form.budgetAmount)))]),_c('el-form-item',{staticStyle:{\"margin-bottom\":\"0\"},attrs:{\"label\":\"申请时可用额度：\"}},[_vm._v(_vm._s(_vm._f(\"fmtMoney\")(_vm.form.availableAmount)))]),_c('el-form-item',{staticStyle:{\"margin-bottom\":\"0\"},attrs:{\"label\":\"申请时备用额度：\"}},[_vm._v(_vm._s(_vm._f(\"fmtMoney\")(_vm.form.imprestAmount)))]),_c('el-form-item',{staticStyle:{\"margin-bottom\":\"0\"},attrs:{\"label\":\"申请时间：\"}},[_vm._v(_vm._s(_vm._f(\"fmtCDate\")(_vm.form.createTime)))]),_c('el-form-item',{staticStyle:{\"margin-bottom\":\"0\"},attrs:{\"label\":\"申请人：\"}},[_vm._v(_vm._s(_vm.form.creater))]),(_vm.isEditPage)?[_c('el-form-item',{staticStyle:{\"margin-bottom\":\"0\"},attrs:{\"label\":\"编辑时间：\"}},[_vm._v(_vm._s(_vm.form.editTime))]),_c('el-form-item',{staticStyle:{\"margin-bottom\":\"0\"},attrs:{\"label\":\"编辑人：\"}},[_vm._v(_vm._s(_vm.form.editer))])]:_vm._e(),_c('el-form-item',{attrs:{\"label\":\"申请理由：\",\"prop\":\"reason\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"show-word-limit\":\"\",\"maxlength\":300,\"rows\":3,\"autosize\":{ minRows: 2, maxRows: 6 },\"placeholder\":\"请输入申请理由\"},model:{value:(_vm.form.reason),callback:function ($$v) {_vm.$set(_vm.form, \"reason\", $$v)},expression:\"form.reason\"}})],1),_c('el-form-item',{attrs:{\"label\":\"附件上传：\"}},[_c('attachment',{attrs:{\"list\":_vm.form.attachments,\"size\":\"small\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"plain\":\"\"},on:{\"click\":_vm.onCancel}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":_vm.onVerily}},[_vm._v(_vm._s(_vm.isEditPage ? '保 存' : '提 交'))])],1)],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-dialog\n    class=\"popup-use-imprest\"\n    title=\"备用额度使用申请\"\n    width=\"50%\"\n    :visible.sync=\"show\"\n    destroy-on-close\n    :before-close=\"onCancel\"\n    @closed=\"onClose\"\n  >\n    <div slot=\"title\">\n      备用额度使用申请<span class=\"desc\"><i>*</i>为必填项</span><appl-sts-icon :status=\"form.status\" point />\n    </div>\n\n    <el-form\n      ref=\"form\"\n      v-loading.lock=\"isLoading\"\n      :model=\"form\"\n      size=\"small\"\n      label-width=\"180px\"\n      :rules=\"rules\"\n      :hide-required-asterisk=\"false\">\n      <el-form-item label=\"积分账户名称：\" style=\"margin-bottom: 0;\">{{ form.account }}</el-form-item>\n      <el-form-item label=\"申请时预算额度：\" style=\"margin-bottom: 0;\">{{ form.budgetAmount | fmtMoney }}</el-form-item>\n      <el-form-item label=\"申请时可用额度：\" style=\"margin-bottom: 0;\">{{ form.availableAmount | fmtMoney }}</el-form-item>\n      <el-form-item label=\"申请时备用额度：\" style=\"margin-bottom: 0;\">{{ form.imprestAmount | fmtMoney }}</el-form-item>\n      <el-form-item label=\"申请时间：\" style=\"margin-bottom: 0;\">{{ form.createTime | fmtCDate }}</el-form-item>\n      <el-form-item label=\"申请人：\" style=\"margin-bottom: 0;\">{{ form.creater }}</el-form-item>\n      <template v-if=\"isEditPage\">\n      <el-form-item label=\"编辑时间：\" style=\"margin-bottom: 0;\">{{ form.editTime }}</el-form-item>\n      <el-form-item label=\"编辑人：\" style=\"margin-bottom: 0;\">{{ form.editer }}</el-form-item>\n      </template>\n      <el-form-item label=\"申请理由：\" prop=\"reason\">\n        <el-input\n          v-model=\"form.reason\"\n          type=\"textarea\"\n          show-word-limit\n          :maxlength=\"300\"\n          :rows=\"3\"\n          :autosize=\"{ minRows: 2, maxRows: 6 }\"\n          placeholder=\"请输入申请理由\">\n        </el-input>\n      </el-form-item>\n      <el-form-item label=\"附件上传：\">\n        <attachment :list=\"form.attachments\" size=\"small\"></attachment>\n      </el-form-item>\n      <el-form-item>\n        <el-button plain @click=\"onCancel\">取 消</el-button>\n        <el-button type=\"primary\" plain @click=\"onVerily\">{{ isEditPage ? '保 存' : '提 交' }}</el-button>\n      </el-form-item>\n    </el-form>\n  </el-dialog>\n</template>\n\n<script>\nimport Attachment from '@/components/Attachment'\nimport ApplStsIcon from '@/components/status/ApplStsIcon'\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'popup-use-imprest',\n  components: { Attachment, ApplStsIcon },\n  model: {\n    prop: 'visible',\n    event: 'change'\n  },\n  props: {\n    visible: Boolean,\n    sid: [Number, String]\n  },\n  data () {\n    return {\n      isEditPage: false, // 是否编辑页\n      show: false,\n      isLoading: false,\n      form: {}, // 表单数据\n      rules: { // 表单验证规则\n        reason: [{ required: true, message: '请输入申请理由，长度不能超出300个汉字', trigger: 'blur' }]\n      }\n    }\n  },\n  computed: {\n    ...mapGetters({\n      accountInfo: 'getAccountInfo'\n    })\n  },\n  watch: {\n    visible (val) {\n      this.show = val\n\n      if (val) {\n        // 根据是否有账户申请id，判断是创建还是编辑\n        if (this.sid) {\n          this.isEditPage = true\n          this.getData(this.sid)\n        } else {\n          this.form = {\n            createTime: new Date(),\n            account: this.accountInfo.account,\n            creater: this.accountInfo.name\n          }\n        }\n      }\n    }\n  },\n  methods: {\n    getData (id) {\n      this.isLoading = true\n      this.$http.serviceGetApplEditDetail({ id })\n        .then(res => {\n          this.form = { ...res }\n        })\n        .finally(() => {\n          this.isLoading = false\n        })\n    },\n\n    onClose () {\n      this.$emit('update:visible', this.show)\n    },\n\n    // 提交前验证\n    onVerily () {\n      this.$refs.form.validate(valid => {\n        if (valid) {\n          this.$confirm(`是否${this.isEditPage ? '保存修改' : '确认提交'}？`)\n            .then(() => {\n              this.onSubmit()\n            })\n        } else {\n          return false\n        }\n      })\n    },\n\n    // 提交申请\n    onSubmit () {\n      this.isLoading = true\n      this.$http.serviceCreateAppl(this.form)\n        .then(res => {\n          this.$message.success('提交成功')\n          this.show = false\n        })\n        .catch(error => {\n          if (!error.code && error.name) Promise.reject(error)\n          else this.$alert(error.message, '提交失败', { type: 'error' })\n        })\n        .finally(() => {\n          this.isLoading = false\n        })\n    },\n\n    onCancel () {\n      const _this = this\n      this.$confirm(`是否取消${this.isEditPage ? '编辑' : '申请'}？`, '取消确认', { type: 'error' })\n        .then(() => {\n          _this.isEditPage = false\n          _this.show = false\n          _this.form = {}\n        })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.popup-use-imprest {\n  .desc {\n    margin-left: 10px;\n    font-size: 12px;\n    font-weight: normal;\n    color: #909399;\n    i {\n      color: #F56C6C;\n    }\n  }\n\n  .el-select {\n    width: 100%;\n  }\n\n  .el-button {\n    min-width: 100px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PopupUseImp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PopupUseImp.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PopupUseImp.vue?vue&type=template&id=860673d2&scoped=true&\"\nimport script from \"./PopupUseImp.vue?vue&type=script&lang=js&\"\nexport * from \"./PopupUseImp.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PopupUseImp.vue?vue&type=style&index=0&id=860673d2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"860673d2\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Attachment.vue?vue&type=style&index=0&id=afcef4cc&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Attachment.vue?vue&type=style&index=0&id=afcef4cc&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PopupUseImp.vue?vue&type=style&index=0&id=860673d2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PopupUseImp.vue?vue&type=style&index=0&id=860673d2&lang=scss&scoped=true&\"","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('splice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND_INDEX);\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"attachment-container\",class:{ isSmall: _vm.size === 'small' }},[(_vm.size === 'normal')?_c('el-form-item',{attrs:{\"label\":\"附件:\"}},[_c('el-upload',{attrs:{\"action\":\"/attachment\",\"show-file-list\":false,\"before-upload\":_vm.beforeUpload,\"on-success\":_vm.handleSuccess,\"on-error\":_vm.handleError,\"on-progress\":_vm.handleProgress,\"file-list\":_vm.fileList}},[_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-upload2\",\"loading\":_vm.isUploading}},[_vm._v(\"点击上传\")]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"支持格式：.rar，.zip，.doc，.docx，.pdf，.xls，.xlsx，.txt，.jpg，.jpeg，.png，单个文件不能超过20M\")])],1)],1):_c('el-upload',{attrs:{\"action\":\"/attachment\",\"show-file-list\":false,\"before-upload\":_vm.beforeUpload,\"on-success\":_vm.handleSuccess,\"on-error\":_vm.handleError,\"on-progress\":_vm.handleProgress,\"file-list\":_vm.fileList}},[_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-upload2\",\"loading\":_vm.isUploading}},[_vm._v(\"选择附件\")]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"支持格式：.rar，.zip，.doc，.docx，.pdf，.xls，.xlsx，.txt，.jpg，.jpeg，.png，单个文件不能超过20M\")])],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.fileList,\"show-header\":_vm.size === 'normal',\"size\":\"mini\",\"empty-text\":\"暂无附件\"}},[_c('el-table-column',{attrs:{\"label\":\"序号\",\"type\":\"index\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"附件名称\",\"prop\":\"name\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.size === 'small')?_c('span',[_vm._v(_vm._s(_vm._f(\"fmtName\")(scope.row.name,scope.row, _vm.size)))]):_vm._e()]}}])}),(_vm.size === 'normal')?[_c('el-table-column',{attrs:{\"label\":\"附件格式\",\"prop\":\"format\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"文件大小\",\"prop\":\"size\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm._f(\"fmtSize\")(scope.row.size)))]}}],null,false,3844785627)}),_c('el-table-column',{attrs:{\"label\":\"上传时间\",\"prop\":\"createTime\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm._f(\"fmtDateTime\")(scope.row.createTime)))]}}],null,false,1832337739)}),_c('el-table-column',{attrs:{\"label\":\"上传人\",\"prop\":\"creater\",\"align\":\"center\"}})]:_vm._e(),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-link',{attrs:{\"icon\":\"el-icon-download\"},on:{\"click\":function($event){return _vm.onDownLoad(scope.row.url)}}},[_vm._v(\"下载\")]),_c('el-popconfirm',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"title\":\"是否确认删除？\",\"confirmButtonType\":\"danger\"},on:{\"onConfirm\":function($event){return _vm.onRemoveAttachment(scope.row.fid)}}},[_c('el-link',{attrs:{\"slot\":\"reference\",\"icon\":\"el-icon-remove-outline\",\"type\":\"danger\"},slot:\"reference\"},[_vm._v(\"删除\")])],1)]}}])})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"attachment-container\" :class=\"{ isSmall: size === 'small' }\">\n    <el-form-item label=\"附件:\" v-if=\"size === 'normal'\">\n      <el-upload\n        action=\"/attachment\"\n        :show-file-list=\"false\"\n        :before-upload=\"beforeUpload\"\n        :on-success=\"handleSuccess\"\n        :on-error=\"handleError\"\n        :on-progress=\"handleProgress\"\n        :file-list=\"fileList\">\n        <el-button size=\"small\" icon=\"el-icon-upload2\" :loading=\"isUploading\">点击上传</el-button>\n        <div slot=\"tip\" class=\"el-upload__tip\">支持格式：.rar，.zip，.doc，.docx，.pdf，.xls，.xlsx，.txt，.jpg，.jpeg，.png，单个文件不能超过20M</div>\n      </el-upload>\n    </el-form-item>\n\n    <el-upload\n      v-else\n      action=\"/attachment\"\n      :show-file-list=\"false\"\n      :before-upload=\"beforeUpload\"\n      :on-success=\"handleSuccess\"\n      :on-error=\"handleError\"\n      :on-progress=\"handleProgress\"\n      :file-list=\"fileList\">\n      <el-button size=\"small\" icon=\"el-icon-upload2\" :loading=\"isUploading\">选择附件</el-button>\n      <div slot=\"tip\" class=\"el-upload__tip\">支持格式：.rar，.zip，.doc，.docx，.pdf，.xls，.xlsx，.txt，.jpg，.jpeg，.png，单个文件不能超过20M</div>\n    </el-upload>\n\n    <el-table\n      :data=\"fileList\"\n      :show-header=\"size === 'normal'\"\n      size=\"mini\"\n      empty-text=\"暂无附件\"\n      style=\"width: 100%\">\n      <el-table-column label=\"序号\" type=\"index\" align=\"center\"></el-table-column>\n      <el-table-column label=\"附件名称\" prop=\"name\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <span v-if=\"size === 'small'\">{{ scope.row.name | fmtName(scope.row, size) }}</span>\n        </template>\n      </el-table-column>\n\n      <template v-if=\"size === 'normal'\">\n        <el-table-column label=\"附件格式\" prop=\"format\" align=\"center\"></el-table-column>\n        <el-table-column label=\"文件大小\" prop=\"size\" align=\"center\">\n          <template slot-scope=\"scope\">{{ scope.row.size | fmtSize }}</template>\n        </el-table-column>\n        <el-table-column label=\"上传时间\" prop=\"createTime\" align=\"center\">\n          <template slot-scope=\"scope\">{{ scope.row.createTime | fmtDateTime }}</template>\n        </el-table-column>\n        <el-table-column label=\"上传人\" prop=\"creater\" align=\"center\"></el-table-column>\n      </template>\n\n      <el-table-column label=\"操作\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-link icon=\"el-icon-download\" @click=\"onDownLoad(scope.row.url)\">下载</el-link>\n          <el-popconfirm title=\"是否确认删除？\" confirmButtonType=\"danger\" @onConfirm=\"onRemoveAttachment(scope.row.fid)\" style=\"margin-left: 10px;\">\n            <el-link slot=\"reference\" icon=\"el-icon-remove-outline\" type=\"danger\">删除</el-link>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'attachment',\n  props: {\n    list: Array,\n    size: {\n      type: String,\n      default: 'normal'\n    }\n  },\n  data () {\n    return {\n      fileList: [],\n      isUploading: false\n    }\n  },\n  watch: {\n    list: {\n      handler: function (val) {\n        this.fileList = val\n      },\n      immediate: true\n    }\n  },\n  filters: {\n    fmtSize (val) {\n      if (parseInt(val / 1024) === 0) {\n        return val + 'B'\n      }\n      if (parseInt(val / 1024 / 1024) === 0) {\n        return parseFloat(val / 1024).toFixed(2) + 'KB'\n      }\n      if (parseInt(val / 1024 / 1024 / 1024) === 0) {\n        return parseFloat(val / 1024 / 1024).toFixed(2) + 'MB'\n      }\n    },\n\n    fmtName (val, row, size) {\n      return val && size === 'small' && row.format ? (val + '.' + row.format.toLowerCase()) : val\n    }\n  },\n  methods: {\n    // 上传前的验证\n    beforeUpload (file) {\n      const isMatchType = /[\\s\\S]*(.rar|.zip|.doc|.docx|.pdf|.xls|.xlsx|.txt|.jpg|.jpeg|.png)$/.test(file.name)\n      const isLt20M = file.size / 1024 / 1024 < 20\n\n      if (!isMatchType) {\n        this.$message.error('文件格式只能是.rar，.zip，.doc，.docx，.pdf，.xls，.xlsx，.txt，.jpg，.jpeg，.png的!')\n      }\n      if (!isLt20M) {\n        this.$message.error('单个文件不能超过20M!')\n      }\n      if (isMatchType && isLt20M) {\n        this.isUploading = true\n      }\n      return isMatchType && isLt20M\n    },\n\n    handleProgress (event, file, fileList) {\n      // console.log('handleProgress')\n      // console.log(event, file, fileList)\n    },\n\n    // 上传成功的处理\n    handleSuccess (response, file, fileList) {\n      this.isUploading = false\n      this.fileList.push(response.body)\n      this.$emit('update:list', this.fileList)\n    },\n\n    // 上传失败的处理\n    handleError (err, file, fileList) {\n      // console.log(err, file, fileList)\n      this.$message.error('上传失败：' + err)\n      this.isUploading = false\n    },\n\n    // 下载附件\n    onDownLoad (url) {\n      // todo:下载文件\n    },\n\n    // 删除附件\n    onRemoveAttachment (id) {\n      const idx = this.fileList.findIndex(f => f.fid === id)\n      idx >= 0 && this.fileList.splice(idx, 1)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.attachment-container {\n  margin: 10px 0;\n\n  &.isSmall {\n    margin: 0;\n  }\n\n  .el-upload__tip {\n    line-height: 20px;\n  }\n\n  .el-link {\n    font-size: 12px;\n    font-weight: normal;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Attachment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Attachment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Attachment.vue?vue&type=template&id=afcef4cc&scoped=true&\"\nimport script from \"./Attachment.vue?vue&type=script&lang=js&\"\nexport * from \"./Attachment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Attachment.vue?vue&type=style&index=0&id=afcef4cc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"afcef4cc\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApplStsIcon.vue?vue&type=style&index=0&id=07d8ecd8&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApplStsIcon.vue?vue&type=style&index=0&id=07d8ecd8&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"sts-icon\",class:_vm._f(\"fmtStatusColor\")(_vm.status),style:({ marginLeft: _vm.point ? '20px' : 0 })},[(_vm.point && _vm.status !== undefined)?_c('i'):_vm._e(),_vm._v(_vm._s(_vm._f(\"fmtStatus\")(_vm.status))+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <span class=\"sts-icon\" :class=\"status | fmtStatusColor\" :style=\"{ marginLeft: point ? '20px' : 0 }\">\n    <i v-if=\"point && status !== undefined\"></i>{{ status | fmtStatus }}\n  </span>\n</template>\n\n<script>\nconst STATUS = {\n  0: '已完成',\n  1: '申请中',\n  2: '已编辑',\n  3: '已取消',\n  4: '未通过'\n}\n\nexport default {\n  name: 'appl-sts-icon',\n  props: {\n    status: [Number, String],\n    point: Boolean\n  },\n  filters: {\n    // 状态文案\n    fmtStatus (val) {\n      return val === undefined ? '' : (STATUS[val] ? STATUS[val] : '未知')\n    },\n\n    // 状态颜色\n    fmtStatusColor (val, type = 'color') {\n      switch (STATUS[val]) {\n        case '已完成': return 'color-green'\n        case '申请中':\n        case '已编辑': return 'color-orange'\n        case '已取消': return 'color-black'\n        case '未通过': return 'color-red'\n        default: return 'color-black'\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './stsIcon.scss';\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApplStsIcon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApplStsIcon.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ApplStsIcon.vue?vue&type=template&id=07d8ecd8&scoped=true&\"\nimport script from \"./ApplStsIcon.vue?vue&type=script&lang=js&\"\nexport * from \"./ApplStsIcon.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ApplStsIcon.vue?vue&type=style&index=0&id=07d8ecd8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"07d8ecd8\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}