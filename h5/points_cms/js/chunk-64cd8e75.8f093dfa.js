(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64cd8e75"],{4109:function(t,e,o){},"64ce":function(t,e,o){},7008:function(t,e,o){"use strict";var r=o("64ce"),n=o.n(r);n.a},a434:function(t,e,o){"use strict";var r=o("23e7"),n=o("23cb"),i=o("a691"),s=o("50c4"),a=o("7b0b"),l=o("65f0"),c=o("8418"),u=o("1dde"),f=o("ae40"),m=u("splice"),p=f("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,g=Math.min,h=9007199254740991,b="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!m||!p},{splice:function(t,e){var o,r,u,f,m,p,v=a(this),_=s(v.length),x=n(t,_),w=arguments.length;if(0===w?o=r=0:1===w?(o=0,r=_-x):(o=w-2,r=g(d(i(e),0),_-x)),_+o-r>h)throw TypeError(b);for(u=l(v,r),f=0;f<r;f++)m=x+f,m in v&&c(u,f,v[m]);if(u.length=r,o<r){for(f=x;f<_-r;f++)m=f+r,p=f+o,m in v?v[p]=v[m]:delete v[p];for(f=_;f>_-r+o;f--)delete v[f-1]}else if(o>r)for(f=_-r;f>x;f--)m=f+r-1,p=f+o-1,m in v?v[p]=v[m]:delete v[p];for(f=0;f<o;f++)v[f+x]=arguments[f+2];return v.length=_-r+o,u}})},c2bf:function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{staticClass:"popup-judgement",attrs:{title:"决裁申请",width:"50%",visible:t.show,"destroy-on-close":"","before-close":t.onCancel},on:{"update:visible":function(e){t.show=e},closed:t.onClose}},[o("div",{attrs:{slot:"title"},slot:"title"},[t._v(" 决裁申请"),o("span",{staticClass:"desc"},[o("i",[t._v("*")]),t._v("为必填项")]),o("appl-sts-icon",{attrs:{status:t.form.status,point:""}})],1),o("el-form",{directives:[{name:"loading",rawName:"v-loading.lock",value:t.isLoading,expression:"isLoading",modifiers:{lock:!0}}],ref:"form",attrs:{model:t.form,size:"small","label-width":"180px",rules:t.rules,"hide-required-asterisk":!1}},[o("el-form-item",{staticStyle:{"margin-bottom":"8px"},attrs:{label:"申请时间："}},[t._v(t._s(t._f("fmtCDate")(t.form.createTime)))]),o("el-form-item",{staticStyle:{"margin-bottom":"8px"},attrs:{label:"积分账户名称："}},[t._v(t._s(t.form.account))]),o("el-form-item",{staticStyle:{"margin-bottom":"8px"},attrs:{label:"申请人："}},[t._v(t._s(t.form.creater))]),o("el-form-item",{attrs:{label:"选择申请种类：",prop:"type"}},[o("el-select",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[o("el-option",{attrs:{label:"全部",value:1}}),o("el-option",{attrs:{label:"预算额度",value:2}}),o("el-option",{attrs:{label:"备用额度",value:3}})],1)],1),3!==t.form.type?[o("el-form-item",{attrs:{label:"新增预算（元）：",prop:"budget"}},[o("el-input",{attrs:{placeholder:"请输入新增预算（元）"},model:{value:t.form.budget,callback:function(e){t.$set(t.form,"budget",e)},expression:"form.budget"}})],1),o("el-form-item",{attrs:{label:"新增预算额度：",prop:"budgetAmount"}},[o("el-input",{attrs:{placeholder:"请输入新增预算额度"},model:{value:t.form.budgetAmount,callback:function(e){t.$set(t.form,"budgetAmount",e)},expression:"form.budgetAmount"}})],1)]:t._e(),2!==t.form.type?[o("el-form-item",{attrs:{label:"新增备用金（元）：",prop:"imprest"}},[o("el-input",{attrs:{placeholder:"请输入新增备用金（元）"},model:{value:t.form.imprest,callback:function(e){t.$set(t.form,"imprest",e)},expression:"form.imprest"}})],1),o("el-form-item",{attrs:{label:"新增备用额度：",prop:"imprestAmount"}},[o("el-input",{attrs:{placeholder:"请输入新增备用额度"},model:{value:t.form.imprestAmount,callback:function(e){t.$set(t.form,"imprestAmount",e)},expression:"form.imprestAmount"}})],1)]:t._e(),o("el-form-item",{attrs:{label:"申请理由：",prop:"reason"}},[o("el-input",{attrs:{type:"textarea","show-word-limit":"",maxlength:300,rows:3,autosize:{minRows:2,maxRows:6},placeholder:"请输入申请理由"},model:{value:t.form.reason,callback:function(e){t.$set(t.form,"reason",e)},expression:"form.reason"}})],1),o("el-form-item",{attrs:{label:"附件上传："}},[o("attachment",{attrs:{list:t.form.attachments,size:"small"}})],1),o("el-form-item",[o("el-button",{attrs:{plain:""},on:{click:t.onCancel}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary",plain:""},on:{click:t.onVerily}},[t._v(t._s(t.isEditPage?"保 存":"提 交"))])],1)],2)],1)},n=[],i=(o("b0c0"),o("a9e3"),o("d3b7"),o("5530")),s=o("f509"),a=o("fe54"),l=o("2f62"),c={name:"popup-judgement",components:{Attachment:s["a"],ApplStsIcon:a["a"]},model:{prop:"visible",event:"change"},props:{visible:Boolean,sid:[Number,String]},data:function(){return{isEditPage:!1,show:!1,isLoading:!1,form:{},rules:{type:[{required:!0,message:"请选择申请种类",trigger:"change"}],budget:[{required:!0,pattern:/^\d{1,15}$/,message:"请填写整数数字，长度不能超出15个数字",trigger:"blur"}],budgetAmount:[{required:!0,pattern:/^\d{1,15}$/,message:"请填写整数数字，长度不能超出15个数字",trigger:"blur"}],imprest:[{required:!0,pattern:/^\d{1,15}$/,message:"请填写整数数字，长度不能超出15个数字",trigger:"blur"}],imprestAmount:[{required:!0,pattern:/^\d{1,15}$/,message:"请填写整数数字，长度不能超出15个数字",trigger:"blur"}],reason:[{required:!0,message:"请输入申请理由，长度不能超出300个汉字",trigger:"blur"}]}}},computed:Object(i["a"])({},Object(l["b"])({accountInfo:"getAccountInfo"})),watch:{visible:function(t){this.show=t,t&&(this.sid?(this.isEditPage=!0,this.getData(this.sid)):this.form={createTime:new Date,account:this.accountInfo.account,creater:this.accountInfo.name})}},methods:{getData:function(t){var e=this;this.isLoading=!0,this.$http.serviceGetApplEditDetail({id:t}).then((function(t){e.form=Object(i["a"])({},t)})).finally((function(){e.isLoading=!1}))},onClose:function(){this.$emit("update:visible",this.show)},onVerily:function(){var t=this;this.$refs.form.validate((function(e){if(!e||t.overAmount)return!1;t.$confirm("是否".concat(t.isEditPage?"保存修改":"确认提交","？")).then((function(){t.onSubmit()}))}))},onSubmit:function(){var t=this;this.isLoading=!0,this.$http.serviceCreateAppl(this.form).then((function(e){t.$message.success("提交成功"),t.show=!1})).catch((function(e){!e.code&&e.name?Promise.reject(e):t.$alert(e.message,"提交失败",{type:"error"})})).finally((function(){t.isLoading=!1}))},onCancel:function(){var t=this;this.$confirm("是否取消".concat(this.isEditPage?"编辑":"申请","？"),"取消确认",{type:"error"}).then((function(){t.isEditPage=!1,t.show=!1,t.form={}}))}}},u=c,f=(o("d686"),o("2877")),m=Object(f["a"])(u,r,n,!1,null,"3c75b72a",null);e["default"]=m.exports},c740:function(t,e,o){"use strict";var r=o("23e7"),n=o("b727").findIndex,i=o("44d2"),s=o("ae40"),a="findIndex",l=!0,c=s(a);a in[]&&Array(1)[a]((function(){l=!1})),r({target:"Array",proto:!0,forced:l||!c},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i(a)},d686:function(t,e,o){"use strict";var r=o("d73b"),n=o.n(r);n.a},d73b:function(t,e,o){},f509:function(t,e,o){"use strict";var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"attachment-container",class:{isSmall:"small"===t.size}},["normal"===t.size?o("el-form-item",{attrs:{label:"附件:"}},[o("el-upload",{attrs:{action:"/attachment","show-file-list":!1,"before-upload":t.beforeUpload,"on-success":t.handleSuccess,"on-error":t.handleError,"on-progress":t.handleProgress,"file-list":t.fileList}},[o("el-button",{attrs:{size:"small",icon:"el-icon-upload2",loading:t.isUploading}},[t._v("点击上传")]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("支持格式：.rar，.zip，.doc，.docx，.pdf，.xls，.xlsx，.txt，.jpg，.jpeg，.png，单个文件不能超过20M")])],1)],1):o("el-upload",{attrs:{action:"/attachment","show-file-list":!1,"before-upload":t.beforeUpload,"on-success":t.handleSuccess,"on-error":t.handleError,"on-progress":t.handleProgress,"file-list":t.fileList}},[o("el-button",{attrs:{size:"small",icon:"el-icon-upload2",loading:t.isUploading}},[t._v("选择附件")]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("支持格式：.rar，.zip，.doc，.docx，.pdf，.xls，.xlsx，.txt，.jpg，.jpeg，.png，单个文件不能超过20M")])],1),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.fileList,"show-header":"normal"===t.size,size:"mini","empty-text":"暂无附件"}},[o("el-table-column",{attrs:{label:"序号",type:"index",align:"center"}}),o("el-table-column",{attrs:{label:"附件名称",prop:"name",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["small"===t.size?o("span",[t._v(t._s(t._f("fmtName")(e.row.name,e.row,t.size)))]):t._e()]}}])}),"normal"===t.size?[o("el-table-column",{attrs:{label:"附件格式",prop:"format",align:"center"}}),o("el-table-column",{attrs:{label:"文件大小",prop:"size",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("fmtSize")(e.row.size)))]}}],null,!1,3844785627)}),o("el-table-column",{attrs:{label:"上传时间",prop:"createTime",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("fmtDateTime")(e.row.createTime)))]}}],null,!1,1832337739)}),o("el-table-column",{attrs:{label:"上传人",prop:"creater",align:"center"}})]:t._e(),o("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-link",{attrs:{icon:"el-icon-download"},on:{click:function(o){return t.onDownLoad(e.row.url)}}},[t._v("下载")]),o("el-popconfirm",{staticStyle:{"margin-left":"10px"},attrs:{title:"是否确认删除？",confirmButtonType:"danger"},on:{onConfirm:function(o){return t.onRemoveAttachment(e.row.fid)}}},[o("el-link",{attrs:{slot:"reference",icon:"el-icon-remove-outline",type:"danger"},slot:"reference"},[t._v("删除")])],1)]}}])})],2)],1)},n=[],i=(o("c740"),o("a434"),o("b0c0"),o("b680"),{name:"attachment",props:{list:Array,size:{type:String,default:"normal"}},data:function(){return{fileList:[],isUploading:!1}},watch:{list:{handler:function(t){this.fileList=t},immediate:!0}},filters:{fmtSize:function(t){return 0===parseInt(t/1024)?t+"B":0===parseInt(t/1024/1024)?parseFloat(t/1024).toFixed(2)+"KB":0===parseInt(t/1024/1024/1024)?parseFloat(t/1024/1024).toFixed(2)+"MB":void 0},fmtName:function(t,e,o){return t&&"small"===o&&e.format?t+"."+e.format.toLowerCase():t}},methods:{beforeUpload:function(t){var e=/[\s\S]*(.rar|.zip|.doc|.docx|.pdf|.xls|.xlsx|.txt|.jpg|.jpeg|.png)$/.test(t.name),o=t.size/1024/1024<20;return e||this.$message.error("文件格式只能是.rar，.zip，.doc，.docx，.pdf，.xls，.xlsx，.txt，.jpg，.jpeg，.png的!"),o||this.$message.error("单个文件不能超过20M!"),e&&o&&(this.isUploading=!0),e&&o},handleProgress:function(t,e,o){},handleSuccess:function(t,e,o){this.isUploading=!1,this.fileList.push(t.body),this.$emit("update:list",this.fileList)},handleError:function(t,e,o){this.$message.error("上传失败："+t),this.isUploading=!1},onDownLoad:function(t){},onRemoveAttachment:function(t){var e=this.fileList.findIndex((function(e){return e.fid===t}));e>=0&&this.fileList.splice(e,1)}}}),s=i,a=(o("7008"),o("2877")),l=Object(a["a"])(s,r,n,!1,null,"afcef4cc",null);e["a"]=l.exports},f6bd:function(t,e,o){"use strict";var r=o("4109"),n=o.n(r);n.a},fe54:function(t,e,o){"use strict";var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",{staticClass:"sts-icon",class:t._f("fmtStatusColor")(t.status),style:{marginLeft:t.point?"20px":0}},[t.point&&void 0!==t.status?o("i"):t._e(),t._v(t._s(t._f("fmtStatus")(t.status))+" ")])},n=[],i=(o("a9e3"),{0:"已完成",1:"申请中",2:"已编辑",3:"已取消",4:"未通过"}),s={name:"appl-sts-icon",props:{status:[Number,String],point:Boolean},filters:{fmtStatus:function(t){return void 0===t?"":i[t]?i[t]:"未知"},fmtStatusColor:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(i[t]){case"已完成":return"color-green";case"申请中":case"已编辑":return"color-orange";case"已取消":return"color-black";case"未通过":return"color-red";default:return"color-black"}}}},a=s,l=(o("f6bd"),o("2877")),c=Object(l["a"])(a,r,n,!1,null,"07d8ecd8",null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-64cd8e75.8f093dfa.js.map